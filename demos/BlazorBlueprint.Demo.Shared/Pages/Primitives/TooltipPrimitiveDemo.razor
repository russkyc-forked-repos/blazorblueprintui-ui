@page "/primitives/tooltip"
@using BlazorBlueprint.Primitives.Services
<PageTitle>Tooltip Primitive - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Tooltip Primitive</h1>
        <p class="text-xl text-muted-foreground">
            Headless, unstyled tooltip primitive with full accessibility support and positioning.
        </p>
    </div>

    <div class="space-y-6">
        <!-- AsChild Pattern -->
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">AsChild Pattern</h2>
                <p class="text-muted-foreground">
                    Use AsChild to compose triggers with your own styled elements.
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Without AsChild -->
                <div class="space-y-3 p-4 border rounded-lg">
                    <h3 class="text-lg font-medium">Without AsChild</h3>
                    <p class="text-sm text-muted-foreground">
                        TooltipTrigger renders its own span element.
                    </p>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                            Hover me
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-4 py-2 border rounded bg-card shadow-lg">
                            Without AsChild tooltip
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                </div>

                <!-- With AsChild -->
                <div class="space-y-3 p-4 border rounded-lg">
                    <h3 class="text-lg font-medium">With AsChild</h3>
                    <p class="text-sm text-muted-foreground">
                        Button receives hover/focus behavior via TriggerContext.
                    </p>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger AsChild>
                            <BbButton Variant="ButtonVariant.Outline" Size="ButtonSize.Icon">
                                <LucideIcon Name="info" Size="16" />
                            </BbButton>
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-4 py-2 border rounded bg-card shadow-lg">
                            With AsChild tooltip
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                </div>
            </div>

            <CodeBlock Source="Primitives/Tooltip/as-child.txt" />
        </section>

        <!-- Basic Example -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Basic Primitive Example</h2>
            <p class="text-muted-foreground">
                This demonstrates the Tooltip primitive with minimal styling.
                All behavior (hover, focus, delay, positioning) is built-in.
            </p>

            <div class="rounded-lg border bg-card p-6 max-w-md">
                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Hover me
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>

                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-4 py-2 border rounded bg-card shadow-lg">
                        This is a tooltip
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
            </div>

            <CodeBlock Source="Primitives/Tooltip/basic.txt" />
        </section>

        <!-- Controlled State Example -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Controlled State</h2>
            <p class="text-muted-foreground">
                The primitive supports controlled mode where parent component manages open state.
            </p>

            <div class="space-y-4">
                <div class="flex items-center gap-4">
                    <button @onclick="() => isOpen = !isOpen" class="px-4 py-2 border rounded">
                        External Toggle
                    </button>
                    <span class="text-sm text-muted-foreground">
                        State: @(isOpen ? "Open" : "Closed")
                    </span>
                </div>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip @bind-Open="isOpen">
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Controlled Tooltip
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>

                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-4 py-2 border rounded bg-card shadow-lg">
                        This tooltip is controlled externally
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
            </div>

            <CodeBlock Source="Primitives/Tooltip/controlled.txt" />
        </section>

        <!-- Positioning Example -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Positioning</h2>
            <p class="text-muted-foreground">
                The primitive supports configurable side and alignment via PositioningService.
            </p>

            <div class="rounded-lg border bg-card p-6 flex gap-4 flex-wrap">
                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="inline-flex items-center justify-center px-4 py-2 border rounded cursor-pointer">
                        <LucideIcon Name="arrow-up" Size="16" />
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Top" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Top positioned
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="inline-flex items-center justify-center px-4 py-2 border rounded cursor-pointer">
                        <LucideIcon Name="arrow-down" Size="16" />
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Bottom" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Bottom positioned
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="inline-flex items-center justify-center px-4 py-2 border rounded cursor-pointer">
                        <LucideIcon Name="arrow-left" Size="16" />
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Left" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Left positioned
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="inline-flex items-center justify-center px-4 py-2 border rounded cursor-pointer">
                        <LucideIcon Name="arrow-right" Size="16" />
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Right" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Right positioned
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
            </div>

            <CodeBlock Source="Primitives/Tooltip/positioning.txt" />
        </section>

        <!-- Delay Duration Example -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Delay Duration</h2>
            <p class="text-muted-foreground">
                Configure show and hide delays for the tooltip.
            </p>

            <div class="rounded-lg border bg-card p-6 flex gap-4 flex-wrap">
                <BlazorBlueprint.Primitives.Tooltip.BbTooltip DelayDuration="0">
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Instant (0ms)
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Shows immediately
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip DelayDuration="700">
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Default (700ms)
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Shows after 700ms
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip DelayDuration="1500">
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Slow (1500ms)
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Shows after 1.5 seconds
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
            </div>

            <CodeBlock Source="Primitives/Tooltip/delay.txt" />
        </section>

        <!-- Alignment Example -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Alignment Options</h2>
            <p class="text-muted-foreground">
                Align the tooltip relative to the trigger (start, center, end).
            </p>

            <div class="rounded-lg border bg-card p-6 flex gap-4 flex-wrap">
                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Top Start
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Top" Align="@PopoverAlign.Start" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Aligned to start
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Top Center
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Top" Align="@PopoverAlign.Center" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Centered (default)
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger class="px-4 py-2 border rounded cursor-pointer">
                        Top End
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent Side="@PopoverSide.Top" Align="@PopoverAlign.End" class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                        Aligned to end
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
            </div>

            <CodeBlock Source="Primitives/Tooltip/alignment.txt" />
        </section>

        <!-- Focus and Accessibility Demo -->
        <section class="space-y-4">
            <h2 class="text-2xl font-semibold">Focus and Accessibility</h2>
            <p class="text-muted-foreground">
                The primitive automatically handles focus and keyboard accessibility.
            </p>

            <div class="space-y-4">
                <p class="text-sm">
                    Try tabbing to the triggers below to see tooltips appear on focus:
                </p>
                <div class="flex gap-4">
                    <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger Focusable="true" class="px-4 py-2 border rounded cursor-pointer">
                            Focusable trigger
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                            Shows on focus
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltip>

                    <BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger Focusable="true" class="px-4 py-2 border rounded cursor-pointer">
                            Another trigger
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipTrigger>
                        <BlazorBlueprint.Primitives.Tooltip.BbTooltipContent class="px-2 py-1 border rounded bg-card shadow-lg text-sm">
                            Also shows on focus
                        </BlazorBlueprint.Primitives.Tooltip.BbTooltipContent>
                    </BlazorBlueprint.Primitives.Tooltip.BbTooltip>
                </div>
            </div>
        </section>

        <AccessibilityList>
            <AriaAttributes>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">role="tooltip"</code> on content for screen readers
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-describedby</code> links trigger to tooltip content
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">data-state</code> attribute for CSS styling (open)
                </AccessibilityItem>
                <AccessibilityItem>
                    Scoped unique IDs for multiple tooltips on the same page
                </AccessibilityItem>
                <AccessibilityItem>
                    700ms default delay prevents accidental tooltip display
                </AccessibilityItem>
            </AriaAttributes>
            <KeyboardNavigation>
                <KeyboardShortcutItem Description="Navigate to trigger">
                    <BbKbd>Tab</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Show tooltip on focus">
                    <BbKbd>Focus</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Show tooltip on hover">
                    <BbKbd>Hover</BbKbd>
                </KeyboardShortcutItem>
            </KeyboardNavigation>
        </AccessibilityList>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">API Reference</h2>
                <p class="text-muted-foreground">Component properties and parameters.</p>
            </div>
            <div class="space-y-4">
                <ApiReference ComponentName="Tooltip">
                    <ApiParameter Name="Open" Type="bool?">
                        Controls whether the tooltip is open (controlled mode). When null, the tooltip manages its own state (uncontrolled mode). Supports two-way binding with <code>@@bind-Open</code>.
                    </ApiParameter>
                    <ApiParameter Name="OpenChanged" Type="EventCallback&lt;bool&gt;">
                        Event callback invoked when the open state changes.
                    </ApiParameter>
                    <ApiParameter Name="DefaultOpen" Type="bool" Default="false">
                        Default open state when in uncontrolled mode.
                    </ApiParameter>
                    <ApiParameter Name="DelayDuration" Type="int" Default="700">
                        The delay in milliseconds before showing the tooltip.
                    </ApiParameter>
                    <ApiParameter Name="HideDelay" Type="int" Default="0">
                        The delay in milliseconds before hiding the tooltip after mouse leaves.
                    </ApiParameter>
                    <ApiParameter Name="Placement" Type="string" Default="&quot;top&quot;">
                        The placement position for the tooltip (top, bottom, left, right).
                    </ApiParameter>
                    <ApiParameter Name="Class" Type="string?">
                        Additional CSS classes to apply to the root element.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The child content to render inside the tooltip container.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the root element.
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="TooltipTrigger">
                    <ApiParameter Name="AsChild" Type="bool" Default="false">
                        When true, the trigger does not render its own span element. Instead, it passes trigger behavior via TriggerContext to child components.
                    </ApiParameter>
                    <ApiParameter Name="Focusable" Type="bool" Default="true">
                        Whether the trigger should be keyboard focusable. Set to false if child content is already focusable.
                    </ApiParameter>
                    <ApiParameter Name="OnMouseEnter" Type="EventCallback&lt;MouseEventArgs&gt;">
                        Custom mouse enter handler. Called in addition to the default show behavior.
                    </ApiParameter>
                    <ApiParameter Name="OnMouseLeave" Type="EventCallback&lt;MouseEventArgs&gt;">
                        Custom mouse leave handler. Called in addition to the default hide behavior.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The content to display inside the trigger.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the trigger element.
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="TooltipContent">
                    <ApiParameter Name="Side" Type="PopoverSide?">
                        Preferred side for positioning. If not set, uses the Placement from the parent Tooltip context. Default is Top.
                    </ApiParameter>
                    <ApiParameter Name="Align" Type="PopoverAlign?">
                        Alignment relative to trigger. If not set, uses the Placement from the parent Tooltip context. Default is Center.
                    </ApiParameter>
                    <ApiParameter Name="Offset" Type="int" Default="8">
                        Offset distance from the trigger element in pixels.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The content to render inside the tooltip.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the content container.
                    </ApiParameter>
                </ApiReference>
            </div>
        </section>
    </div>
</div>

@code {
    private bool isOpen = false;
}
