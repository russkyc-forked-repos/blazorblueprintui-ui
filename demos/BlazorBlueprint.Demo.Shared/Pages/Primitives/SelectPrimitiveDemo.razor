@page "/primitives/select"
<PageTitle>Select Primitive - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Select Primitive</h1>
        <p class="text-xl text-muted-foreground">
            Headless, unstyled select component with keyboard support and ARIA attributes.
        </p>
    </div>

    <div class="space-y-6">
        <!-- Basic Example -->
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Basic Example</h2>
                <p class="text-muted-foreground">
                    Minimal unstyled primitive with SelectValue for automatic display text and placeholder.
                    TValue is declared once on Select and cascaded to all children.
                </p>
            </div>
            <div class="rounded-lg border bg-card p-6">
                <div class="w-[280px]">
                    <BlazorBlueprint.Primitives.Select.BbSelect TValue="string" @bind-Value="basicValue" ItemClass="px-3 py-2 cursor-pointer hover:bg-accent">
                        <BlazorBlueprint.Primitives.Select.BbSelectTrigger class="flex items-center justify-between w-full px-3 py-2 border border-input rounded-md bg-background">
                            <BlazorBlueprint.Primitives.Select.BbSelectValue Placeholder="Select a fruit..." />
                            <span>&#9660;</span>
                        </BlazorBlueprint.Primitives.Select.BbSelectTrigger>
                        <BlazorBlueprint.Primitives.Select.BbSelectContent class="z-50 mt-1 w-full border border-border rounded-md bg-popover shadow-md">
                            <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("apple")" Text="Apple" />
                            <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("banana")" Text="Banana" />
                            <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("orange")" Text="Orange" />
                            <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("grape")" Text="Grape" />
                        </BlazorBlueprint.Primitives.Select.BbSelectContent>
                    </BlazorBlueprint.Primitives.Select.BbSelect>
                </div>
                <p class="text-sm text-muted-foreground mt-3">
                    Selected: <strong>@(basicValue ?? "None")</strong>
                </p>
            </div>

            <CodeBlock Source="Primitives/Select/basic.txt" />
        </section>

        <!-- Controlled Example -->
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Controlled State</h2>
                <p class="text-muted-foreground">
                    Control the selected value from your component code.
                </p>
            </div>
            <div class="rounded-lg border bg-card p-6">
                <div class="space-y-4">
                    <div class="w-[280px]">
                        <BlazorBlueprint.Primitives.Select.BbSelect TValue="string" @bind-Value="controlledValue" ItemClass="px-3 py-2 cursor-pointer hover:bg-accent">
                            <BlazorBlueprint.Primitives.Select.BbSelectTrigger class="flex items-center justify-between w-full px-3 py-2 border border-input rounded-md bg-background">
                                <BlazorBlueprint.Primitives.Select.BbSelectValue Placeholder="Select a fruit..." />
                                <span>&#9660;</span>
                            </BlazorBlueprint.Primitives.Select.BbSelectTrigger>
                            <BlazorBlueprint.Primitives.Select.BbSelectContent class="z-50 mt-1 w-full max-h-60 overflow-auto border border-border rounded-md bg-popover shadow-md">
                                <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("strawberry")" Text="Strawberry" />
                                <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("watermelon")" Text="Watermelon" />
                                <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("pineapple")" Text="Pineapple" />
                                <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("mango")" Text="Mango" />
                            </BlazorBlueprint.Primitives.Select.BbSelectContent>
                        </BlazorBlueprint.Primitives.Select.BbSelect>
                    </div>
                    <div class="text-sm text-muted-foreground">
                        Current value: <span class="font-mono">@(string.IsNullOrEmpty(controlledValue) ? "null" : controlledValue)</span>
                    </div>
                    <button @onclick="@(() => controlledValue = "mango")" class="px-4 py-2 text-sm border border-border rounded-md hover:bg-accent">
                        Set to Mango
                    </button>
                </div>
            </div>

            <CodeBlock Source="Primitives/Select/controlled.txt" />
        </section>

        <!-- Disabled State -->
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Disabled State</h2>
                <p class="text-muted-foreground">
                    Select with disabled state prevents interaction.
                </p>
            </div>
            <div class="rounded-lg border bg-card p-6">
                <div class="w-[280px]">
                    <BlazorBlueprint.Primitives.Select.BbSelect TValue="string" Disabled="true" DefaultValue="@("disabled")">
                        <BlazorBlueprint.Primitives.Select.BbSelectTrigger class="flex items-center justify-between w-full px-3 py-2 border border-input rounded-md bg-background opacity-50 cursor-not-allowed">
                            <span>Disabled Select</span>
                            <span>&#9660;</span>
                        </BlazorBlueprint.Primitives.Select.BbSelectTrigger>
                        <BlazorBlueprint.Primitives.Select.BbSelectContent class="z-50 mt-1 w-full border border-border rounded-md bg-popover shadow-md">
                            <BlazorBlueprint.Primitives.Select.BbSelectItem Value="@("disabled")" Text="This won't open" class="px-3 py-2" />
                        </BlazorBlueprint.Primitives.Select.BbSelectContent>
                    </BlazorBlueprint.Primitives.Select.BbSelect>
                </div>
            </div>

            <CodeBlock Source="Primitives/Select/disabled.txt" />
        </section>

        <AccessibilityList>
            <AriaAttributes>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">role="combobox"</code> on trigger button
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-expanded</code> automatically applied to trigger reflecting open state
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-controls</code> linking trigger to content
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-haspopup="listbox"</code> on trigger button
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">role="listbox"</code> on content container
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">role="option"</code> on each item
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-selected</code> on selected item
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-activedescendant</code> tracks the currently focused item
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-disabled</code> on trigger when disabled
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">data-state</code> attribute for CSS styling (open/closed, checked/unchecked)
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">data-focused</code> attribute on focused item for keyboard navigation styling
                </AccessibilityItem>
                <AccessibilityItem>
                    Click outside closes dropdown automatically
                </AccessibilityItem>
            </AriaAttributes>
            <KeyboardNavigation>
                <KeyboardShortcutItem Description="Navigate items">
                    <BbKbd>&#8593;</BbKbd> <BbKbd>&#8595;</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Jump to first/last item">
                    <BbKbd>Home</BbKbd> <BbKbd>End</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Select focused item">
                    <BbKbd>Enter</BbKbd> <BbKbd>Space</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Close dropdown">
                    <BbKbd>Escape</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Close and move focus">
                    <BbKbd>Tab</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Open dropdown from trigger">
                    <BbKbd>Enter</BbKbd> <BbKbd>Space</BbKbd> <BbKbd>&#8593;</BbKbd> <BbKbd>&#8595;</BbKbd>
                </KeyboardShortcutItem>
            </KeyboardNavigation>
        </AccessibilityList>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">API Reference</h2>
                <p class="text-muted-foreground">Component properties and parameters.</p>
            </div>
            <div class="space-y-4">
                <ApiReference ComponentName="Select&lt;TValue&gt;">
                    <ApiParameter Name="Value" Type="TValue?">
                        Currently selected value (controlled mode). When null, the select manages its own state. Supports two-way binding with <code>@@bind-Value</code>.
                    </ApiParameter>
                    <ApiParameter Name="ValueChanged" Type="EventCallback&lt;TValue?&gt;">
                        Event callback invoked when the selected value changes.
                    </ApiParameter>
                    <ApiParameter Name="DefaultValue" Type="TValue?">
                        Initial value when in uncontrolled mode.
                    </ApiParameter>
                    <ApiParameter Name="OnValueChange" Type="EventCallback&lt;TValue?&gt;">
                        Event callback invoked when the select value changes. Receives the new value as a parameter.
                    </ApiParameter>
                    <ApiParameter Name="Open" Type="bool?">
                        Controls whether the dropdown is open (controlled mode). When null, the select manages its own open state. Supports two-way binding with <code>@@bind-Open</code>.
                    </ApiParameter>
                    <ApiParameter Name="OpenChanged" Type="EventCallback&lt;bool&gt;">
                        Event callback invoked when the open state changes.
                    </ApiParameter>
                    <ApiParameter Name="DefaultOpen" Type="bool" Default="false">
                        Default open state when in uncontrolled mode.
                    </ApiParameter>
                    <ApiParameter Name="Disabled" Type="bool" Default="false">
                        Whether the select is disabled.
                    </ApiParameter>
                    <ApiParameter Name="ItemClass" Type="string?">
                        Default CSS classes applied to all SelectItem children. Cascaded via context so items merge it with their own classes.
                    </ApiParameter>
                    <ApiParameter Name="DisplayTextSelector" Type="Func&lt;TValue, string&gt;?">
                        Optional function to derive display text from the selected value. Useful when you have a pre-selected value and want to show its display text without waiting for dropdown items to render.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The child content to render within the select context. Typically includes SelectTrigger and SelectContent.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the root element (e.g. <code>class</code>, <code>style</code>).
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="SelectTrigger&lt;TValue&gt;">
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        Content to render inside the trigger button. Typically includes SelectValue and a chevron icon.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the trigger button element (e.g. <code>class</code>, <code>style</code>).
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="SelectContent&lt;TValue&gt;">
                    <ApiParameter Name="Side" Type="PopoverSide" Default="PopoverSide.Bottom">
                        Preferred side for positioning relative to the trigger.
                    </ApiParameter>
                    <ApiParameter Name="Align" Type="PopoverAlign" Default="PopoverAlign.Start">
                        Alignment relative to the trigger.
                    </ApiParameter>
                    <ApiParameter Name="Offset" Type="int" Default="4">
                        Offset distance from the trigger element in pixels.
                    </ApiParameter>
                    <ApiParameter Name="MatchTriggerWidth" Type="bool" Default="true">
                        Whether the select content should match the trigger width.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        Content to render inside the select dropdown. Typically contains SelectItem components.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the content container element (e.g. <code>class</code>, <code>style</code>).
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="SelectItem&lt;TValue&gt;">
                    <ApiParameter Name="Value" Type="TValue?">
                        The value this item represents (required).
                    </ApiParameter>
                    <ApiParameter Name="Text" Type="string?">
                        Display text for the item. Used for trigger display and search. Falls back to Value.ToString() when not provided.
                    </ApiParameter>
                    <ApiParameter Name="Disabled" Type="bool" Default="false">
                        Whether this item is disabled and cannot be selected.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        Custom content to render for the item. When not provided, displays Text or Value.ToString().
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the item element (e.g. <code>class</code>, <code>style</code>). Merged with the parent Select's ItemClass.
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="SelectValue&lt;TValue&gt;">
                    <ApiParameter Name="Placeholder" Type="string?">
                        Placeholder text displayed when no value is selected.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment&lt;string&gt;?">
                        Optional template for custom display rendering. Receives the display text as the context parameter.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the default span element. Only used when ChildContent is null.
                    </ApiParameter>
                </ApiReference>
            </div>
        </section>
    </div>
</div>

@code {
    private string? basicValue = "apple";
    private string? controlledValue;
}
