@page "/primitives/accordion"

<PageTitle>Accordion Primitive - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Accordion Primitive</h1>
            <p class="text-xl text-muted-foreground">
                Headless, unstyled accordion primitive with keyboard support and ARIA attributes.
            </p>
        </div>
    </div>

    <div class="space-y-6">
        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Basic Headless Primitive</h2>
                <p class="text-muted-foreground">
                    The most basic accordion with no styling. Demonstrates the raw, headless behavior.
                </p>
            </div>

            <div class="rounded-lg border bg-card p-6 max-w-md">
                <BlazorBlueprint.Primitives.Accordion.BbAccordion DefaultValue="@(new HashSet<string> { "item-1" })" class="border rounded">
                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="item-1" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">
                            Is it customizable?
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            Yes. It includes ARIA attributes and keyboard support.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="item-2" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">
                            Is it styled?
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            No. It's a headless primitive that provides behavior without any styling.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="item-3" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">
                            Can it be animated?
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            Yes! You can animate the open/close transition using CSS or JavaScript.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>
                </BlazorBlueprint.Primitives.Accordion.BbAccordion>
            </div>

            <CodeBlock Source="Primitives/Accordion/basic.txt" />
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Controlled State</h2>
                <p class="text-muted-foreground">
                    Control which items are open programmatically using @@bind-Value.
                </p>
            </div>

            <div class="space-y-4">
                <div class="flex gap-2">
                    <button @onclick="OpenFirstItem"
                            class="px-3 py-2 border rounded text-sm">
                        Open Item 1
                    </button>
                    <button @onclick="OpenSecondItem"
                            class="px-3 py-2 border rounded text-sm">
                        Open Item 2
                    </button>
                    <button @onclick="CloseAll"
                            class="px-3 py-2 border rounded text-sm">
                        Close All
                    </button>
                </div>

                <p class="text-sm text-muted-foreground">
                    Open items: <strong>@string.Join(", ", controlledValue)</strong>
                </p>

                <div class="rounded-lg border bg-card p-6 max-w-md">
                    <BlazorBlueprint.Primitives.Accordion.BbAccordion @bind-Value="controlledValue" Type="AccordionType.Single" Collapsible="true" class="border rounded">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="controlled-1" class="border-b last:border-0">
                            <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">
                                Controlled Item 1
                            </BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                            <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                                This item's state is controlled externally.
                            </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                        <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="controlled-2" class="border-b last:border-0">
                            <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">
                                Controlled Item 2
                            </BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                            <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                                Use the buttons above to control which item is open.
                            </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordion>
                </div>

                <CodeBlock Source="Primitives/Accordion/controlled.txt" />
            </div>
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Single Mode (Collapsible)</h2>
                <p class="text-muted-foreground">
                    In single mode with collapsible enabled, clicking an open item closes it, leaving all items closed.
                </p>
            </div>

            <div class="rounded-lg border bg-card p-6 max-w-md">
                <BlazorBlueprint.Primitives.Accordion.BbAccordion Type="AccordionType.Single" Collapsible="true" class="border rounded">
                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="item-1" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">Item 1</BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            Content 1 - Click again to collapse.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="item-2" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">Item 2</BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            Content 2 - Click again to collapse.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>
                </BlazorBlueprint.Primitives.Accordion.BbAccordion>
            </div>

            <CodeBlock Source="Primitives/Accordion/single-collapsible.txt" />
        </section>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">Multiple Mode</h2>
                <p class="text-muted-foreground">
                    In multiple mode, multiple items can be open at the same time.
                </p>
            </div>

            <div class="rounded-lg border bg-card p-6 max-w-md">
                <BlazorBlueprint.Primitives.Accordion.BbAccordion Type="AccordionType.Multiple" class="border rounded" DefaultValue="@(new HashSet<string> { "multiple-1" })">
                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="multiple-1" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">First Section</BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            This can be open alongside other sections.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="multiple-2" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">Second Section</BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            Open both sections at once to see them together.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>

                    <BlazorBlueprint.Primitives.Accordion.BbAccordionItem Value="multiple-3" class="border-b last:border-0">
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger class="w-full p-4 text-left cursor-pointer hover:bg-muted/50">Third Section</BlazorBlueprint.Primitives.Accordion.BbAccordionTrigger>
                        <BlazorBlueprint.Primitives.Accordion.BbAccordionContent class="p-4 pt-0">
                            All three can be open simultaneously in multiple mode.
                        </BlazorBlueprint.Primitives.Accordion.BbAccordionContent>
                    </BlazorBlueprint.Primitives.Accordion.BbAccordionItem>
                </BlazorBlueprint.Primitives.Accordion.BbAccordion>
            </div>

            <CodeBlock Source="Primitives/Accordion/multiple.txt" />
        </section>

        <AccessibilityList>
            <AriaAttributes>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">role="region"</code> on content panels for screen readers
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-expanded</code> indicates open/closed state
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-controls</code> links trigger to content
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-labelledby</code> links content to trigger
                </AccessibilityItem>
                <AccessibilityItem>
                    <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-disabled</code> on disabled items
                </AccessibilityItem>
            </AriaAttributes>
            <KeyboardNavigation>
                <KeyboardShortcutItem Description="Navigate to triggers">
                    <BbKbd>Tab</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Toggle accordion item">
                    <BbKbd>Enter</BbKbd>
                    <span class="text-muted-foreground">or</span>
                    <BbKbd>Space</BbKbd>
                </KeyboardShortcutItem>
                <KeyboardShortcutItem Description="Navigate between triggers">
                    <BbKbd>&#8593;</BbKbd>
                    <BbKbd>&#8595;</BbKbd>
                </KeyboardShortcutItem>
            </KeyboardNavigation>
        </AccessibilityList>

        <section class="space-y-4">
            <div class="space-y-2">
                <h2 class="text-2xl font-semibold">API Reference</h2>
                <p class="text-muted-foreground">Component properties and parameters.</p>
            </div>
            <div class="space-y-4">
                <ApiReference ComponentName="Accordion">
                    <ApiParameter Name="Type" Type="AccordionType" Default="AccordionType.Single">
                        Determines if one or multiple items can be open at once (Single | Multiple).
                    </ApiParameter>
                    <ApiParameter Name="Collapsible" Type="bool" Default="false">
                        When true in Single mode, allows closing all items.
                    </ApiParameter>
                    <ApiParameter Name="DefaultValue" Type="HashSet&lt;string&gt;">
                        Initial open items when in uncontrolled mode.
                    </ApiParameter>
                    <ApiParameter Name="Value" Type="HashSet&lt;string&gt;">
                        Controls which items are open (controlled mode). Use with <code>@@bind-Value</code>.
                    </ApiParameter>
                    <ApiParameter Name="ValueChanged" Type="EventCallback&lt;HashSet&lt;string&gt;&gt;">
                        Callback invoked when the open items change. Used with <code>@@bind-Value</code>.
                    </ApiParameter>
                    <ApiParameter Name="OnValueChange" Type="EventCallback&lt;HashSet&lt;string&gt;&gt;">
                        Additional callback invoked when the open items change.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The child content to render. Should contain <code>AccordionItem</code> components.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the root div element (e.g. <code>class</code>, <code>style</code>).
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="AccordionItem">
                    <ApiParameter Name="Value" Type="string">
                        Unique identifier for this accordion item. Required.
                    </ApiParameter>
                    <ApiParameter Name="Disabled" Type="bool" Default="false">
                        Prevents interaction with this item when true.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The child content. Should contain <code>AccordionTrigger</code> and <code>AccordionContent</code>.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the item container div element.
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="AccordionTrigger">
                    <ApiParameter Name="Class" Type="string?">
                        CSS classes to apply to the trigger button element.
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The trigger button content.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the trigger button element.
                    </ApiParameter>
                </ApiReference>

                <ApiReference ComponentName="AccordionContent">
                    <ApiParameter Name="ForceMount" Type="bool" Default="false">
                        When true, content stays mounted even when closed (useful for CSS animations).
                    </ApiParameter>
                    <ApiParameter Name="ChildContent" Type="RenderFragment?">
                        The panel content rendered when the item is open.
                    </ApiParameter>
                    <ApiParameter Name="AdditionalAttributes" Type="Dictionary&lt;string, object&gt;?">
                        Additional HTML attributes applied to the content region element.
                    </ApiParameter>
                </ApiReference>
            </div>
        </section>
    </div>
</div>

@code {
    private HashSet<string> controlledValue = new();

    private void OpenFirstItem()
    {
        controlledValue = new HashSet<string> { "controlled-1" };
    }

    private void OpenSecondItem()
    {
        controlledValue = new HashSet<string> { "controlled-2" };
    }

    private void CloseAll()
    {
        controlledValue = new HashSet<string>();
    }
}
