@page "/components/form-field-switch"
@using System.ComponentModel.DataAnnotations

<PageTitle>FormFieldSwitch Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">FormFieldSwitch</h1>
            <p class="text-xl text-muted-foreground">
                A form field wrapper for Switch with built-in label, helper text, and error messages.
            </p>
        </div>
    </div>

    <!-- Which form component? -->
    <div class="rounded-lg border border-dashed bg-muted/30 p-6 space-y-3">
        <h2 class="text-lg font-semibold">Which form component?</h2>
        <div class="space-y-2 text-sm text-muted-foreground">
            <p><strong>Text input</strong> (string, int, date, etc.)? &rarr; <a href="/components/form-field-input" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldInput&lt;T&gt;</a></p>
            <p><strong>Checkbox</strong>? &rarr; <a href="/components/form-field-checkbox" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldCheckbox</a></p>
            <p><strong>Switch</strong>? &rarr; <strong>FormFieldSwitch</strong> (this page)</p>
            <p><strong>Radio group</strong>? &rarr; <a href="/components/form-field-radio-group" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldRadioGroup</a></p>
            <p><strong>Select dropdown</strong>? &rarr; <a href="/components/form-field-select" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldSelect</a></p>
            <p><strong>Searchable select</strong>? &rarr; <a href="/components/form-field-combobox" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldCombobox</a></p>
            <p><strong>Multi-select</strong>? &rarr; <a href="/components/form-field-multi-select" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldMultiSelect</a></p>
        </div>
    </div>

    <!-- Basic Example -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic Usage</h2>
            <p class="text-sm text-muted-foreground">
                A switch with an auto-associated label and helper text.
            </p>
        </div>
        <div class="max-w-md">
            <BbFormFieldSwitch @bind-Checked="_darkMode"
                             Label="Dark mode"
                             HelperText="Toggle the application theme." />
        </div>
        <div class="rounded-lg border p-4 bg-muted/50">
            <p class="text-sm font-medium mb-1">Checked:</p>
            <p class="text-sm font-mono">@_darkMode</p>
        </div>
        <CodeBlock Source="Components/FormFieldSwitch/basic.txt" />
    </div>

    <!-- Horizontal Layout -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Horizontal Layout</h2>
            <p class="text-sm text-muted-foreground">
                The label sits beside the switch in horizontal orientation.
            </p>
        </div>
        <div class="max-w-md">
            <BbFormFieldSwitch @bind-Checked="_notifications"
                             Label="Enable notifications"
                             HelperText="Receive push notifications."
                             Orientation="FieldOrientation.Horizontal" />
        </div>
        <CodeBlock Source="Components/FormFieldSwitch/horizontal.txt" />
    </div>

    <!-- Size Variants -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Size Variants</h2>
            <p class="text-sm text-muted-foreground">
                Pass the <code class="text-xs bg-muted px-1 py-0.5 rounded">Size</code> parameter to control the switch size.
            </p>
        </div>
        <div class="max-w-md space-y-4">
            <BbFormFieldSwitch @bind-Checked="_small" Label="Small" Size="SwitchSize.Small" />
            <BbFormFieldSwitch @bind-Checked="_medium" Label="Medium (default)" Size="SwitchSize.Medium" />
            <BbFormFieldSwitch @bind-Checked="_large" Label="Large" Size="SwitchSize.Large" />
        </div>
        <CodeBlock Source="Components/FormFieldSwitch/sizes.txt" />
    </div>

    <!-- Disabled -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Disabled</h2>
            <p class="text-sm text-muted-foreground">
                A disabled switch form field.
            </p>
        </div>
        <div class="max-w-md">
            <BbFormFieldSwitch Checked="true"
                             Label="Airplane mode"
                             HelperText="Managed by your administrator."
                             Disabled="true" />
        </div>
        <CodeBlock Source="Components/FormFieldSwitch/disabled.txt" />
    </div>

    <!-- EditForm Integration -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">EditForm Integration</h2>
            <p class="text-sm text-muted-foreground">
                Validation errors display automatically inside an EditForm.
            </p>
        </div>
        <div class="max-w-md">
            <EditForm Model="_formModel" OnValidSubmit="HandleFormSubmit">
                <DataAnnotationsValidator />
                <div class="space-y-4">
                    <BbFormFieldSwitch @bind-Checked="_formModel.AcceptMarketing"
                                     Label="Accept marketing emails" />
                    <BbFormFieldSwitch @bind-Checked="_formModel.AcceptPrivacy"
                                     Label="Accept privacy policy" />
                    <BbButton Type="ButtonType.Submit">Submit</BbButton>
                </div>
            </EditForm>
            @if (_formSubmitted)
            {
                <div class="mt-4 rounded-lg border border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800 p-4">
                    <p class="text-sm font-medium text-green-800 dark:text-green-200">Form submitted successfully!</p>
                </div>
            }
        </div>
        <CodeBlock Source="Components/FormFieldSwitch/editform.txt" />
    </div>

    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>Automatically associates label with input via generated ID</AccessibilityItem>
            <AccessibilityItem>Description linked via aria-describedby</AccessibilityItem>
            <AccessibilityItem>Validation errors displayed with aria-invalid</AccessibilityItem>
        </AriaAttributes>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>
        <div class="space-y-4">
            <ApiReference ComponentName="FormFieldSwitch">
                <ApiParameter Name="Label" Type="string?" Default="null">
                    The label text displayed beside or above the switch.
                </ApiParameter>
                <ApiParameter Name="HelperText" Type="string?" Default="null">
                    Helper text displayed below the switch. Hidden during error state.
                </ApiParameter>
                <ApiParameter Name="ErrorText" Type="string?" Default="null">
                    Manual error text override. When the field is invalid and this is set, replaces auto-generated messages.
                </ApiParameter>
                <ApiParameter Name="Orientation" Type="FieldOrientation" Default="Vertical">
                    Layout orientation of the field.
                </ApiParameter>
                <ApiParameter Name="Checked" Type="bool" Default="false">
                    Whether the switch is checked (on). Use @@bind-Checked for two-way binding.
                </ApiParameter>
                <ApiParameter Name="CheckedChanged" Type="EventCallback&lt;bool&gt;">
                    Callback invoked when the checked state changes.
                </ApiParameter>
                <ApiParameter Name="Size" Type="SwitchSize" Default="Medium">
                    The size variant of the switch (Small, Medium, Large).
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the switch is disabled.
                </ApiParameter>
                <ApiParameter Name="InputClass" Type="string?" Default="null">
                    Additional CSS classes applied to the inner Switch element.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the outer Field container.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?" Default="null">
                    ARIA label for the control.
                </ApiParameter>
            </ApiReference>
        </div>
    </section>
</div>

@code {
    private bool _darkMode;
    private bool _notifications;
    private bool _small;
    private bool _medium;
    private bool _large;
    private bool _formSubmitted;
    private SwitchFormModel _formModel = new();

    private void HandleFormSubmit()
    {
        _formSubmitted = true;
    }

    private class SwitchFormModel
    {
        public bool AcceptMarketing { get; set; }

        [Range(typeof(bool), "true", "true", ErrorMessage = "You must accept the privacy policy.")]
        public bool AcceptPrivacy { get; set; }
    }
}
