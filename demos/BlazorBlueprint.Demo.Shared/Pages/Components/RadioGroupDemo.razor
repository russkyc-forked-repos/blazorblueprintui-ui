@page "/components/radio-group"
@using System.ComponentModel.DataAnnotations

<PageTitle>Radio Group Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Radio Group Component</h1>
        <p class="text-xl text-muted-foreground">
            A set of checkable buttons—known as radio buttons—where no more than one of the buttons can be checked at a time.
        </p>
        </div>
    </div>

    <div class="space-y-6">
    </div>

    <!-- Basic Usage -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic Usage</h2>
            <p class="text-sm text-muted-foreground">
                Simple radio group with two-way binding.
            </p>
        </div>
        <BbRadioGroup @bind-Value="selectedOption" AriaLabel="Choose an option">
            <BbRadioGroupItem Value="@("default")" Label="Default" />
            <BbRadioGroupItem Value="@("comfortable")" Label="Comfortable" />
            <BbRadioGroupItem Value="@("compact")" Label="Compact" />
        </BbRadioGroup>
        <p class="text-sm text-muted-foreground">
            Selected value: <strong>@(selectedOption ?? "none")</strong>
        </p>
        <CodeBlock Source="Components/RadioGroup/basic.txt" />
    </div>

    <!-- Label Parameter -->
    <div class="space-y-4">
        <div class="space-y-2">
            <div class="flex items-center gap-2">
                <h2 class="text-2xl font-semibold">Label Parameter</h2>
                <span class="inline-flex items-center rounded-full bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary ring-1 ring-inset ring-primary/20">v3</span>
            </div>
            <p class="text-sm text-muted-foreground">
                Use the <code class="text-xs bg-muted px-1 py-0.5 rounded">Label</code> parameter on <code class="text-xs bg-muted px-1 py-0.5 rounded">RadioGroupItem</code> to automatically generate an associated label with proper <code class="text-xs bg-muted px-1 py-0.5 rounded">for</code> attribute wiring — no manual label setup needed.
            </p>
        </div>
        <CodeBlock Source="Components/RadioGroup/label.txt" />
    </div>

    <!-- Disabled State -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Disabled State</h2>
            <p class="text-sm text-muted-foreground">
                Radio groups and individual items that cannot be interacted with.
            </p>
        </div>
        <div class="space-y-6">
            <div>
                <h3 class="text-lg font-medium mb-3">Disabled Group</h3>
                <BbRadioGroup @bind-Value="disabledGroupValue" Disabled="true" AriaLabel="Disabled group">
                    <BbRadioGroupItem Value="@("option1")" Label="Option 1" />
                    <BbRadioGroupItem Value="@("option2")" Label="Option 2" />
                </BbRadioGroup>
            </div>
            <div>
                <h3 class="text-lg font-medium mb-3">Individual Item Disabled</h3>
                <BbRadioGroup @bind-Value="individualDisabledValue" AriaLabel="Individual items disabled">
                    <BbRadioGroupItem Value="@("enabled1")" Label="Enabled Option 1" />
                    <BbRadioGroupItem Value="@("disabled")" Label="Disabled Option" Disabled="true" />
                    <BbRadioGroupItem Value="@("enabled2")" Label="Enabled Option 2" />
                </BbRadioGroup>
                <p class="text-sm text-muted-foreground mt-3">
                    Selected: <strong>@(individualDisabledValue ?? "none")</strong>
                </p>
            </div>
        </div>
        <CodeBlock Source="Components/RadioGroup/disabled.txt" />
    </div>

    <!-- Form Validation -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Form Validation</h2>
            <p class="text-sm text-muted-foreground">
                Radio group integrated with Blazor's EditForm and validation.
            </p>
        </div>
        <EditForm Model="formModel" OnValidSubmit="HandleValidSubmit" class="space-y-4">
            <DataAnnotationsValidator />

            <div class="space-y-3">
                <label class="text-sm font-medium">Notification Preference *</label>
                <BbRadioGroup @bind-Value="formModel.NotificationPreference" AriaLabel="Choose notification preference">
                    <BbRadioGroupItem Value="@("email")" Label="Email" />
                    <BbRadioGroupItem Value="@("sms")" Label="SMS" />
                    <BbRadioGroupItem Value="@("push")" Label="Push Notifications" />
                </BbRadioGroup>
                <ValidationMessage For="@(() => formModel.NotificationPreference)" class="text-sm text-destructive" />
            </div>

            <div class="flex gap-4">
                <BbButton Type="ButtonType.Submit" Variant="ButtonVariant.Default">Submit</BbButton>
                <BbButton Type="ButtonType.Button" Variant="ButtonVariant.Outline" OnClick="ResetForm">Reset</BbButton>
            </div>

            @if (!string.IsNullOrEmpty(formMessage))
            {
                <div class="p-4 bg-card rounded-lg border">
                    <p class="text-sm">@formMessage</p>
                </div>
            }
        </EditForm>
        <CodeBlock Source="Components/RadioGroup/form-validation.txt" />
    </div>

    <!-- Different Value Types -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Different Value Types</h2>
            <p class="text-sm text-muted-foreground">
                Radio groups support various data types through generics.
            </p>
        </div>
        <div class="space-y-6">
            <div>
                <h3 class="text-lg font-medium mb-3">Integer Values</h3>
                <BbRadioGroup @bind-Value="intValue" AriaLabel="Select a number">
                    <BbRadioGroupItem Value="1" Label="One" />
                    <BbRadioGroupItem Value="2" Label="Two" />
                    <BbRadioGroupItem Value="3" Label="Three" />
                </BbRadioGroup>
                <p class="text-sm text-muted-foreground mt-3">
                    Selected: <strong>@intValue</strong>
                </p>
            </div>
            <div>
                <h3 class="text-lg font-medium mb-3">Enum Values</h3>
                <BbRadioGroup @bind-Value="sizeValue" AriaLabel="Select a size">
                    <BbRadioGroupItem Value="Size.Small" Label="Small" />
                    <BbRadioGroupItem Value="Size.Medium" Label="Medium" />
                    <BbRadioGroupItem Value="Size.Large" Label="Large" />
                </BbRadioGroup>
                <p class="text-sm text-muted-foreground mt-3">
                    Selected: <strong>@sizeValue</strong>
                </p>
            </div>
        </div>
        <CodeBlock Source="Components/RadioGroup/value-types.txt" />
    </div>

    <!-- Highlighted Container -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">With Container Background</h2>
            <p class="text-sm text-muted-foreground">
                Radio items within highlighted containers. Click anywhere in the container to select.
            </p>
        </div>
        <BbRadioGroup @bind-Value="highlightedValue" AriaLabel="Select a plan">
            <div
                @onclick="@(() => highlightedValue = "free")"
                class="@($"flex items-start space-x-3 rounded-lg border p-4 cursor-pointer transition-colors {(highlightedValue == "free" ? "border-primary bg-primary/5" : "border-input")}")">
                <div @onclick:stopPropagation class="mt-0.5">
                    <BbRadioGroupItem Value="@("free")" Id="plan-free" />
                </div>
                <div class="flex-1">
                    <div class="text-sm font-medium leading-none">
                        Free Plan
                    </div>
                    <p class="text-sm text-muted-foreground mt-1.5">
                        Perfect for getting started. Includes basic features.
                    </p>
                </div>
            </div>
            <div
                @onclick="@(() => highlightedValue = "pro")"
                class="@($"flex items-start space-x-3 rounded-lg border p-4 cursor-pointer transition-colors {(highlightedValue == "pro" ? "border-primary bg-primary/5" : "border-input")}")">
                <div @onclick:stopPropagation class="mt-0.5">
                    <BbRadioGroupItem Value="@("pro")" Id="plan-pro" />
                </div>
                <div class="flex-1">
                    <div class="text-sm font-medium leading-none">
                        Pro Plan
                    </div>
                    <p class="text-sm text-muted-foreground mt-1.5">
                        For professionals. Unlimited features and priority support.
                    </p>
                </div>
            </div>
        </BbRadioGroup>
        <p class="text-sm text-muted-foreground">
            Selected plan: <strong>@(highlightedValue ?? "none")</strong>
        </p>
        <CodeBlock Source="Components/RadioGroup/container.txt" />
    </div>

    <!-- Accessibility -->
    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">role="radiogroup"</code> on the container and <code class="text-xs bg-muted px-1 py-0.5 rounded">role="radio"</code> on each item
            </AccessibilityItem>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-checked</code> reflects the checked state of each radio item
            </AccessibilityItem>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-label</code> on the group provides an accessible name for screen readers
            </AccessibilityItem>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-invalid</code> set when form validation fails
            </AccessibilityItem>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-describedby</code> links the group to descriptive text
            </AccessibilityItem>
            <AccessibilityItem>
                <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-disabled</code> set on disabled items
            </AccessibilityItem>
            <AccessibilityItem>
                Disabled items are not focusable (<code class="text-xs bg-muted px-1 py-0.5 rounded">tabindex="-1"</code>)
            </AccessibilityItem>
            <AccessibilityItem>
                Semantic label association using <code class="text-xs bg-muted px-1 py-0.5 rounded">for</code> attribute when using the Label parameter
            </AccessibilityItem>
            <AccessibilityItem>
                Focus ring appears on keyboard focus (<code class="text-xs bg-muted px-1 py-0.5 rounded">focus-visible:ring-2</code>)
            </AccessibilityItem>
        </AriaAttributes>
        <KeyboardNavigation>
            <KeyboardShortcutItem Description="Focus the selected radio button (or first if none selected)">
                <BbKbd>Tab</BbKbd>
            </KeyboardShortcutItem>
            <KeyboardShortcutItem Description="Navigate between options and select">
                <BbKbd>Arrow Keys</BbKbd>
            </KeyboardShortcutItem>
            <KeyboardShortcutItem Description="Select the focused radio button">
                <BbKbd>Space</BbKbd> / <BbKbd>Enter</BbKbd>
            </KeyboardShortcutItem>
        </KeyboardNavigation>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>

        <div class="space-y-4">
            <ApiReference ComponentName="RadioGroup<TValue>">
                <ApiParameter Name="TValue" Type="type parameter">
                    The type of the value associated with radio group items (e.g., string, int, enum).
                </ApiParameter>
                <ApiParameter Name="Value" Type="TValue">
                    The currently selected value. Supports two-way binding with <code class="text-xs bg-muted px-1 py-0.5 rounded">@@bind-Value</code>.
                </ApiParameter>
                <ApiParameter Name="ValueChanged" Type="EventCallback&lt;TValue&gt;">
                    Callback invoked when the selected value changes.
                </ApiParameter>
                <ApiParameter Name="ValueExpression" Type="Expression&lt;Func&lt;TValue&gt;&gt;?">
                    Expression identifying the bound value, used for form validation integration.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Disables all radio items in the group.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?">
                    Additional CSS classes applied to the radio group container.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?">
                    Accessible label for the radio group, announced by screen readers.
                </ApiParameter>
                <ApiParameter Name="AriaDescribedBy" Type="string?">
                    IDs of elements that describe the radio group for accessibility.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?">
                    The content of the radio group. Should contain <code class="text-xs bg-muted px-1 py-0.5 rounded">RadioGroupItem</code> components.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="RadioGroupItem<TValue>">
                <ApiParameter Name="Value" Type="TValue">
                    Required. The value associated with this radio item. When selected, this becomes the group's value.
                </ApiParameter>
                <ApiParameter Name="Label" Type="string?">
                    Text label displayed next to the radio button with automatic <code class="text-xs bg-muted px-1 py-0.5 rounded">for</code> attribute wiring.
                </ApiParameter>
                <ApiParameter Name="Id" Type="string?">
                    The HTML id attribute. Auto-generated when Label is provided.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Disables this individual radio item.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?">
                    Additional CSS classes applied to the radio item button.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?">
                    Accessible label for the radio item when no visible label is present.
                </ApiParameter>
            </ApiReference>
        </div>
    </section>

</div>

@code {
    // Basic usage
    private string? selectedOption = "comfortable";

    // Disabled states
    private string? disabledGroupValue = "option1";
    private string? individualDisabledValue = "enabled1";

    // Form validation
    private FormModel formModel = new();
    private string formMessage = "";

    // Different value types
    private int intValue = 2;
    private Size sizeValue = Size.Medium;

    // Highlighted container
    private string? highlightedValue = "free";

    private void HandleValidSubmit()
    {
        formMessage = $"Form submitted successfully at {DateTime.Now:HH:mm:ss}. " +
                     $"Notification preference: {formModel.NotificationPreference}";
    }

    private void ResetForm()
    {
        formModel = new FormModel();
        formMessage = "";
    }

    public enum Size
    {
        Small,
        Medium,
        Large
    }

    public class FormModel
    {
        [Required(ErrorMessage = "Please select a notification preference")]
        public string? NotificationPreference { get; set; }
    }
}
