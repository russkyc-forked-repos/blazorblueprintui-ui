@page "/components/dialog"
@inject DialogService DialogService
<PageTitle>Dialog Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Dialog Component</h1>
        <p class="text-xl text-muted-foreground">
            A window overlaid on either the primary window or another dialog window, rendering the content underneath inert.
        </p>
        </div>
    </div>

    <div class="space-y-6">
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Simple Dialog</h2>
        <p class="text-sm text-muted-foreground">
            A basic dialog with title, description, and action buttons.
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Dialog
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Are you absolutely sure?</BbDialogTitle>
                    <BbDialogDescription>
                        This action cannot be undone. This will permanently delete your account
                        and remove your data from our servers.
                    </BbDialogDescription>
                </BbDialogHeader>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/simple.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Dialog with Footer</h2>
        <p class="text-sm text-muted-foreground">
            Dialog with action buttons in the footer using DialogFooter component.
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Edit Profile
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Edit profile</BbDialogTitle>
                    <BbDialogDescription>
                        Make changes to your profile here. Click save when you're done.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="grid gap-4 py-4">
                    <div class="grid grid-cols-4 items-center gap-4">
                        <label for="name" class="text-right text-sm font-medium">
                            Name
                        </label>
                        <input id="name"
                               value="Pedro Duarte"
                               class="col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" />
                    </div>
                    <div class="grid grid-cols-4 items-center gap-4">
                        <label for="username" class="text-right text-sm font-medium">
                            Username
                        </label>
                        <input id="username"
                               value="@@peduarte"
                               class="col-span-3 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" />
                    </div>
                </div>

                <BbDialogFooter>
                    <button type="submit"
                            class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Save changes
                    </button>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/with-footer.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Controlled Dialog</h2>
        <p class="text-sm text-muted-foreground">
            Control the dialog state programmatically using @@bind-Open.
        </p>

        <div class="flex gap-2">
            <button @onclick="() => isDialogOpen = true"
                    class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Dialog
            </button>
        </div>

        <BbDialog @bind-Open="isDialogOpen">
            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Controlled Dialog</BbDialogTitle>
                    <BbDialogDescription>
                        This dialog's open state is controlled from the parent component.
                        You can programmatically open and close it.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="py-4">
                    <p class="text-sm">
                        Dialog is open: <strong>@isDialogOpen</strong>
                    </p>
                </div>

                <BbDialogFooter>
                    <button @onclick="() => isDialogOpen = false"
                            class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                        Cancel
                    </button>
                    <button @onclick="HandleSave"
                            class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Save
                    </button>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/controlled.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Custom Width</h2>
        <p class="text-sm text-muted-foreground">
            Customize the dialog width using the Class parameter.
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Wide Dialog
            </BbDialogTrigger>

            <BbDialogContent Class="max-w-3xl">
                <BbDialogHeader>
                    <BbDialogTitle>Wide Dialog</BbDialogTitle>
                    <BbDialogDescription>
                        This dialog uses a custom max-width class to be wider than the default.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="py-4">
                    <p class="text-sm">
                        You can customize the dialog width by passing additional classes to the DialogContent component.
                        This example uses <code class="bg-muted px-1 py-0.5 rounded">max-w-3xl</code> instead of the default <code class="bg-muted px-1 py-0.5 rounded">max-w-lg</code>.
                    </p>
                </div>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/custom-width.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Without Close Button</h2>
        <p class="text-sm text-muted-foreground">
            Hide the default close button using ShowClose="false".
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Dialog
            </BbDialogTrigger>

            <BbDialogContent ShowClose="false">
                <BbDialogHeader>
                    <BbDialogTitle>Confirm Action</BbDialogTitle>
                    <BbDialogDescription>
                        This dialog doesn't have a close button in the top-right corner.
                        You must use one of the action buttons or press Escape to close.
                    </BbDialogDescription>
                </BbDialogHeader>

                <BbDialogFooter Class="mt-4">
                    <BlazorBlueprint.Primitives.Dialog.BbDialogClose class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                        Cancel
                    </BlazorBlueprint.Primitives.Dialog.BbDialogClose>
                    <BlazorBlueprint.Primitives.Dialog.BbDialogClose class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Confirm
                    </BlazorBlueprint.Primitives.Dialog.BbDialogClose>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/without-close.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">AsChild Pattern</h2>
        <p class="text-sm text-muted-foreground">
            Use AsChild to compose triggers with your own styled Button components instead of inline styles.
        </p>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- Without AsChild -->
            <div class="space-y-3 p-4 border rounded-lg">
                <h3 class="text-lg font-medium">Without AsChild</h3>
                <p class="text-sm text-muted-foreground">
                    DialogTrigger renders its own button element with inline classes.
                </p>
                <BbDialog>
                    <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Open Dialog
                    </BbDialogTrigger>
                    <BbDialogContent>
                        <BbDialogHeader>
                            <BbDialogTitle>Without AsChild</BbDialogTitle>
                            <BbDialogDescription>
                                This dialog uses inline CSS classes on the trigger.
                            </BbDialogDescription>
                        </BbDialogHeader>
                    </BbDialogContent>
                </BbDialog>
            </div>

            <!-- With AsChild -->
            <div class="space-y-3 p-4 border rounded-lg">
                <h3 class="text-lg font-medium">With AsChild</h3>
                <p class="text-sm text-muted-foreground">
                    Button component receives trigger behavior via TriggerContext.
                </p>
                <BbDialog>
                    <BbDialogTrigger>
                        <BbButton Variant="ButtonVariant.Destructive">
                            <LucideIcon Name="trash-2" Size="16" />
                            Delete Account
                        </BbButton>
                    </BbDialogTrigger>
                    <BbDialogContent>
                        <BbDialogHeader>
                            <BbDialogTitle>Delete Account</BbDialogTitle>
                            <BbDialogDescription>
                                This action cannot be undone. This will permanently delete your account.
                            </BbDialogDescription>
                        </BbDialogHeader>
                        <BbDialogFooter>
                            <BbDialogClose>
                                <BbButton Variant="ButtonVariant.Outline">Cancel</BbButton>
                            </BbDialogClose>
                            <BbButton Variant="ButtonVariant.Destructive">Delete</BbButton>
                        </BbDialogFooter>
                    </BbDialogContent>
                </BbDialog>
            </div>
        </div>

        <CodeBlock Source="Components/Dialog/as-child.txt" />

    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Dropdown Controls in Dialog</h2>
        <p class="text-sm text-muted-foreground">
            Dialog containing Select, Combobox, and MultiSelect controls. Tests nested portal behavior
            where each dropdown renders its floating content above the dialog overlay.
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Dialog with Dropdowns
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Nested Dropdown Controls</BbDialogTitle>
                    <BbDialogDescription>
                        Select, Combobox, and MultiSelect all use nested portals to render above the dialog.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="grid gap-4 py-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Select</label>
                        <BbSelect @bind-Value="selectedDialogFruit" TValue="string" Class="w-full">
                            <BbSelectTrigger>
                                <BbSelectValue Placeholder="Select a fruit..." />
                            </BbSelectTrigger>
                            <BbSelectContent>
                                <BbSelectItem Value="@("apple")" Text="Apple" TValue="string">Apple</BbSelectItem>
                                <BbSelectItem Value="@("banana")" Text="Banana" TValue="string">Banana</BbSelectItem>
                                <BbSelectItem Value="@("blueberry")" Text="Blueberry" TValue="string">Blueberry</BbSelectItem>
                                <BbSelectItem Value="@("grapes")" Text="Grapes" TValue="string">Grapes</BbSelectItem>
                                <BbSelectItem Value="@("pineapple")" Text="Pineapple" TValue="string">Pineapple</BbSelectItem>
                            </BbSelectContent>
                        </BbSelect>
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium">Combobox</label>
                        <BbCombobox TValue="string"
                                  Options="comboboxFrameworks"
                                  @bind-Value="selectedComboboxFramework"
                                  Placeholder="Select framework..."
                                  SearchPlaceholder="Search framework..."
                                  EmptyMessage="No framework found."
                                  MatchTriggerWidth="true" />
                    </div>

                    <div class="space-y-2">
                        <label class="text-sm font-medium">MultiSelect</label>
                        <BbMultiSelect TValue="string"
                                     Options="multiSelectTechnologies"
                                     @bind-Values="selectedTechnologies"
                                     Placeholder="Select technologies..."
                                     SearchPlaceholder="Search technologies..."
                                     EmptyMessage="No technologies found."
                                     MatchTriggerWidth="true" />
                    </div>
                </div>

                <BbDialogFooter>
                    <BlazorBlueprint.Primitives.Dialog.BbDialogClose class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                        Cancel
                    </BlazorBlueprint.Primitives.Dialog.BbDialogClose>
                    <button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Confirm
                    </button>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/dropdown-controls.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">DatePicker in Dialog</h2>
        <p class="text-sm text-muted-foreground">
            DatePicker inside a Dialog. The calendar popover renders above the dialog overlay
            using fixed positioning and elevated z-index.
        </p>

        <BbDialog>
            <BbDialogTrigger AsChild="false" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                Open Dialog with DatePicker
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Schedule Event</BbDialogTitle>
                    <BbDialogDescription>
                        Pick a date for the event using the DatePicker below.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="grid gap-4 py-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Event Date</label>
                        <BbDatePicker @bind-Value="dialogDatePickerValue" Class="w-full" />
                    </div>
                </div>

                <BbDialogFooter>
                    <BlazorBlueprint.Primitives.Dialog.BbDialogClose class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
                        Cancel
                    </BlazorBlueprint.Primitives.Dialog.BbDialogClose>
                    <button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
                        Confirm
                    </button>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>

        <CodeBlock Source="Components/Dialog/datepicker.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Confirm Service <span class="text-xs font-normal text-primary bg-primary/10 px-1.5 py-0.5 rounded">New</span></h2>
        <p class="text-sm text-muted-foreground">
            Use <code>DialogService.Confirm()</code> for one-line programmatic confirm dialogs.
            No markup, no state variables — just an async call that returns <code>true</code> or <code>false</code>.
        </p>

        <div class="flex items-center gap-4">
            <BbButton OnClick="HandleConfirmDelete">Delete Item</BbButton>
            <BbButton Variant="ButtonVariant.Destructive" OnClick="HandleDestructiveDelete">Destructive Delete</BbButton>
            <span class="text-sm text-muted-foreground">Result: @confirmResult</span>
        </div>

        <CodeBlock Source="Components/Dialog/confirm-service.txt" />
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Form in Dialog</h2>
        <p class="text-sm text-muted-foreground">
            Dialog with bound input fields. Typing should feel instant with no flicker — keyboard events
            are handled in JavaScript, and only Escape triggers a C# interop call.
        </p>

        <BbDialog>
            <BbDialogTrigger>
                <BbButton>Open Form Dialog</BbButton>
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Create Account</BbDialogTitle>
                    <BbDialogDescription>
                        Fill in the details below to create a new account.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="grid gap-4 py-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium">First Name</label>
                        <BbInput @bind-Value="formFirstName" Placeholder="Enter first name..." />
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Last Name</label>
                        <BbInput @bind-Value="formLastName" Placeholder="Enter last name..." />
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Email</label>
                        <BbInput @bind-Value="formEmail" Type="InputType.Email" Placeholder="you@example.com" />
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Bio</label>
                        <BbTextarea @bind-Value="formBio" Placeholder="Tell us about yourself..." />
                    </div>
                </div>

                <BbDialogFooter>
                    <BbDialogClose>
                        <BbButton Variant="ButtonVariant.Outline">Cancel</BbButton>
                    </BbDialogClose>
                    <BbButton OnClick="HandleCreateAccount">Create Account</BbButton>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>
    </div>

    <div class="space-y-4">
        <h2 class="text-2xl font-semibold">Nested Dialog</h2>
        <p class="text-sm text-muted-foreground">
            A dialog that opens another dialog. Pressing Escape should close only the innermost dialog.
            Press Escape again to close the outer dialog.
        </p>

        <BbDialog @bind-Open="outerDialogOpen">
            <BbDialogTrigger>
                <BbButton Variant="ButtonVariant.Outline">Open Outer Dialog</BbButton>
            </BbDialogTrigger>

            <BbDialogContent>
                <BbDialogHeader>
                    <BbDialogTitle>Outer Dialog</BbDialogTitle>
                    <BbDialogDescription>
                        This is the outer dialog. Click the button below to open a nested dialog inside.
                    </BbDialogDescription>
                </BbDialogHeader>

                <div class="py-4 space-y-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium">Outer Input</label>
                        <BbInput @bind-Value="outerDialogInput" Placeholder="Type here..." />
                    </div>

                    <BbDialog @bind-Open="innerDialogOpen">
                        <BbDialogTrigger>
                            <BbButton Variant="ButtonVariant.Secondary">Open Inner Dialog</BbButton>
                        </BbDialogTrigger>

                        <BbDialogContent>
                            <BbDialogHeader>
                                <BbDialogTitle>Inner Dialog</BbDialogTitle>
                                <BbDialogDescription>
                                    This is the nested inner dialog. Press Escape — only this dialog should close.
                                </BbDialogDescription>
                            </BbDialogHeader>

                            <div class="py-4 space-y-2">
                                <label class="text-sm font-medium">Inner Input</label>
                                <BbInput @bind-Value="innerDialogInput" Placeholder="Type in the inner dialog..." />
                            </div>

                            <BbDialogFooter>
                                <BbDialogClose>
                                    <BbButton Variant="ButtonVariant.Outline">Close Inner</BbButton>
                                </BbDialogClose>
                            </BbDialogFooter>
                        </BbDialogContent>
                    </BbDialog>
                </div>

                <BbDialogFooter>
                    <BbDialogClose>
                        <BbButton Variant="ButtonVariant.Outline">Close Outer</BbButton>
                    </BbDialogClose>
                </BbDialogFooter>
            </BbDialogContent>
        </BbDialog>
    </div>

    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>Focus is automatically trapped within the dialog</AccessibilityItem>
            <AccessibilityItem>Includes role="dialog" and aria-modal attributes</AccessibilityItem>
            <AccessibilityItem>Scroll lock on body when dialog is open</AccessibilityItem>
            <AccessibilityItem>Respects prefers-reduced-motion for animations</AccessibilityItem>
        </AriaAttributes>
        <KeyboardNavigation>
            <KeyboardShortcutItem Description="Close the dialog">
                <BbKbd>Escape</BbKbd>
            </KeyboardShortcutItem>
            <KeyboardShortcutItem Description="Move focus to next element">
                <BbKbd>Tab</BbKbd>
            </KeyboardShortcutItem>
            <KeyboardShortcutItem Description="Move focus to previous element">
                <BbKbd>Shift+Tab</BbKbd>
            </KeyboardShortcutItem>
        </KeyboardNavigation>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>
        <div class="space-y-4">
            <ApiReference ComponentName="Dialog">
                <ApiParameter Name="Open" Type="bool?" Default="null">
                    Controls whether the dialog is open (controlled mode). When null, the dialog manages its own state.
                </ApiParameter>
                <ApiParameter Name="DefaultOpen" Type="bool" Default="false">
                    Default open state when in uncontrolled mode.
                </ApiParameter>
                <ApiParameter Name="Modal" Type="bool" Default="true">
                    Whether the dialog can be dismissed by clicking outside or pressing Escape.
                </ApiParameter>
                <ApiParameter Name="OnOpenChange" Type="EventCallback&lt;bool&gt;">
                    Event callback invoked when the dialog open state changes.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="DialogContent">
                <ApiParameter Name="ShowClose" Type="bool" Default="true">
                    Whether to show the close button (X icon).
                </ApiParameter>
                <ApiParameter Name="CloseOnEscape" Type="bool" Default="true">
                    Whether pressing Escape should close the dialog.
                </ApiParameter>
                <ApiParameter Name="TrapFocus" Type="bool" Default="true">
                    Whether to trap focus within the dialog.
                </ApiParameter>
                <ApiParameter Name="LockScroll" Type="bool" Default="true">
                    Whether to lock body scroll when dialog is open.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="DialogTrigger">
                <ApiParameter Name="AsChild" Type="bool" Default="true">
                    When true, passes trigger behavior to child components instead of rendering its own button.
                </ApiParameter>
            </ApiReference>
        </div>
    </section>
</div>

@code {
    private string confirmResult = "None";
    private bool isDialogOpen = false;
    private DateTime? dialogDatePickerValue;
    private string? selectedComboboxFramework;
    private string? selectedDialogFruit;
    private IEnumerable<string>? selectedTechnologies = new List<string>();

    // Form in Dialog
    private string? formFirstName;
    private string? formLastName;
    private string? formEmail;
    private string? formBio;

    // Nested Dialog
    private bool outerDialogOpen;
    private bool innerDialogOpen;
    private string? outerDialogInput;
    private string? innerDialogInput;

    private readonly SelectOption<string>[] multiSelectTechnologies =
    [
        new("Blazor", "Blazor"),
        new("React", "React"),
        new("Vue", "Vue"),
        new("Angular", "Angular"),
        new("Svelte", "Svelte"),
        new("Next.js", "Next.js"),
        new("Nuxt", "Nuxt"),
        new("SolidJS", "SolidJS"),
        new("Astro", "Astro"),
        new("Remix", "Remix")
    ];

    private readonly SelectOption<string>[] comboboxFrameworks =
    [
        new("blazor", "Blazor"),
        new("react", "React"),
        new("vue", "Vue"),
        new("angular", "Angular"),
        new("svelte", "Svelte"),
        new("nextjs", "Next.js"),
        new("nuxt", "Nuxt")
    ];

    private void HandleSave()
    {
        // Handle save logic
        isDialogOpen = false;
    }

    private void HandleCreateAccount()
    {
        // Handle account creation
    }

    private string GetComboboxFrameworkLabel(string? value) =>
        comboboxFrameworks.FirstOrDefault(f => f.Value == value)?.Text ?? value ?? "";

    private async Task HandleConfirmDelete()
    {
        var confirmed = await DialogService.Confirm(
            "Delete item?",
            "This action cannot be undone. The item will be permanently removed.");

        confirmResult = confirmed ? "Confirmed" : "Cancelled";
    }

    private async Task HandleDestructiveDelete()
    {
        var confirmed = await DialogService.Confirm(
            "Delete item?",
            "This action cannot be undone.",
            new ConfirmDialogOptions
            {
                ConfirmText = "Yes, delete",
                CancelText = "Keep it",
                Destructive = true
            });

        confirmResult = confirmed ? "Deleted!" : "Kept";
    }
}
