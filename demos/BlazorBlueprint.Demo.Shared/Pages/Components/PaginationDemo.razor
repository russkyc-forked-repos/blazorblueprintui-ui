@page "/components/pagination"

<PageTitle>Pagination Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">Pagination Component</h1>
            <p class="text-xl text-muted-foreground">
                Pagination with page navigation, previous and next controls, and optional state management.
            </p>
        </div>
    </div>

    <!-- Basic Example -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic Example</h2>
            <p class="text-sm text-muted-foreground">
                A simple pagination component with page numbers using manual state management.
            </p>
        </div>
        <BbPagination>
            <BbPaginationContent>
                <BbPaginationItem>
                    <BbPaginationPrevious OnClick="@(() => GoToPage(_currentPage - 1))" Disabled="@(_currentPage <= 1)" />
                </BbPaginationItem>
                @for (int i = 1; i <= 5; i++)
                {
                    var page = i;
                    <BbPaginationItem>
                        <BbPaginationLink IsActive="@(_currentPage == page)" OnClick="@(() => GoToPage(page))">@(page)</BbPaginationLink>
                    </BbPaginationItem>
                }
                <BbPaginationItem>
                    <BbPaginationNext OnClick="@(() => GoToPage(_currentPage + 1))" Disabled="@(_currentPage >= 5)" />
                </BbPaginationItem>
            </BbPaginationContent>
        </BbPagination>
        <p class="text-sm text-muted-foreground text-center">Current page: @_currentPage</p>

        <CodeBlock Source="Components/Pagination/basic.txt" />
    </div>

    <!-- With Ellipsis -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">With Ellipsis</h2>
            <p class="text-sm text-muted-foreground">
                Show ellipsis for large page ranges.
            </p>
        </div>
        <BbPagination>
            <BbPaginationContent>
                <BbPaginationItem>
                    <BbPaginationPrevious />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationLink IsActive="true">1</BbPaginationLink>
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationLink>2</BbPaginationLink>
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationEllipsis />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationLink>9</BbPaginationLink>
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationLink>10</BbPaginationLink>
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationNext />
                </BbPaginationItem>
            </BbPaginationContent>
        </BbPagination>

        <CodeBlock Source="Components/Pagination/ellipsis.txt" />
    </div>

    <!-- State-Managed Pagination -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">State-Managed Pagination</h2>
            <p class="text-sm text-muted-foreground">
                Use <code class="bg-muted px-1 py-0.5 rounded">PaginationState</code> for automatic state management.
                Navigation buttons automatically enable/disable and update state.
            </p>
        </div>
        <BbPagination State="@_paginationState"
                    OnPageChanged="HandlePageChanged"
                    Class="flex items-center justify-between">
            <BbPaginationInfo />
            <BbPaginationContent>
                <BbPaginationItem>
                    <BbPaginationFirst />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationPrevious ShowText="false" />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationPageDisplay />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationNext ShowText="false" />
                </BbPaginationItem>
                <BbPaginationItem>
                    <BbPaginationLast />
                </BbPaginationItem>
            </BbPaginationContent>
        </BbPagination>

        <CodeBlock Source="Components/Pagination/state-managed.txt" />
    </div>

    <!-- Full Table Pagination Style -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Table Pagination Style</h2>
            <p class="text-sm text-muted-foreground">
                Full-featured pagination with page size selector, ideal for data tables.
            </p>
        </div>
        <BbPagination State="@_tablePaginationState"
                    PageSizes="@(new[] { 5, 10, 20, 50 })"
                    OnPageChanged="HandleTablePageChanged"
                    OnPageSizeChanged="HandleTablePageSizeChanged"
                    Class="flex items-center justify-between px-2 py-4 border rounded-lg">
            <BbPaginationInfo />
            <BbPaginationContent Class="flex items-center gap-6 lg:gap-8">
                <BbPaginationPageSizeSelector />
                <div class="flex items-center gap-2">
                    <BbPaginationPageDisplay />
                    <div class="flex items-center gap-1">
                        <BbPaginationItem><BbPaginationFirst /></BbPaginationItem>
                        <BbPaginationItem><BbPaginationPrevious ShowText="false" /></BbPaginationItem>
                        <BbPaginationItem><BbPaginationNext ShowText="false" /></BbPaginationItem>
                        <BbPaginationItem><BbPaginationLast /></BbPaginationItem>
                    </div>
                </div>
            </BbPaginationContent>
        </BbPagination>

        <CodeBlock Source="Components/Pagination/table-style.txt" />
    </div>

    <!-- Customized Labels -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Customized Labels</h2>
            <p class="text-sm text-muted-foreground">
                Customize labels and formats for internationalization or different use cases.
            </p>
        </div>
        <BbPagination State="@_customPaginationState"
                    Class="flex items-center justify-between px-2 py-4 border rounded-lg">
            <BbPaginationInfo Format="Items {0} to {1} (Total: {2})" EmptyText="No data available" />
            <BbPaginationContent Class="flex items-center gap-4">
                <BbPaginationPageSizeSelector Label="Items per page" ShowLabel="true" />
                <BbPaginationPageDisplay Format="{0} / {1}" />
                <div class="flex items-center gap-1">
                    <BbPaginationItem><BbPaginationFirst /></BbPaginationItem>
                    <BbPaginationItem><BbPaginationPrevious ShowText="false" /></BbPaginationItem>
                    <BbPaginationItem><BbPaginationNext ShowText="false" /></BbPaginationItem>
                    <BbPaginationItem><BbPaginationLast /></BbPaginationItem>
                </div>
            </BbPaginationContent>
        </BbPagination>

        <CodeBlock Source="Components/Pagination/custom-labels.txt" />
    </div>

    <!-- Simple Mode -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Simple Mode</h2>
            <p class="text-sm text-muted-foreground">
                Use <code class="bg-muted px-1 py-0.5 rounded">TotalPages</code> and <code class="bg-muted px-1 py-0.5 rounded">CurrentPage</code> for a one-liner pagination
                that auto-renders the standard layout â€” no child components needed.
            </p>
        </div>
        <BbPagination TotalPages="10" @bind-CurrentPage="_simplePage" OnPageChanged="HandleSimplePageChanged" />
        <p class="text-sm text-muted-foreground">Current page: @_simplePage</p>

        <CodeBlock Source="Components/Pagination/simple-mode.txt" />
    </div>

    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>The root <code class="text-xs bg-muted px-1 py-0.5 rounded">Pagination</code> renders a <code class="text-xs bg-muted px-1 py-0.5 rounded">&lt;nav&gt;</code> element with <code class="text-xs bg-muted px-1 py-0.5 rounded">role="navigation"</code> and <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-label="pagination"</code></AccessibilityItem>
            <AccessibilityItem>Active page links use <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-current="page"</code> to indicate the current page</AccessibilityItem>
            <AccessibilityItem>Disabled navigation buttons use the native <code class="text-xs bg-muted px-1 py-0.5 rounded">disabled</code> attribute</AccessibilityItem>
            <AccessibilityItem>Ellipsis elements use <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-hidden="true"</code> with a <code class="text-xs bg-muted px-1 py-0.5 rounded">sr-only</code> "More pages" label for assistive technologies</AccessibilityItem>
            <AccessibilityItem>Icon-only navigation buttons include <code class="text-xs bg-muted px-1 py-0.5 rounded">sr-only</code> text labels for assistive technologies</AccessibilityItem>
        </AriaAttributes>
        <KeyboardNavigation>
            <KeyboardShortcutItem Description="Activate the focused pagination button">
                <BbKbd>Enter</BbKbd> / <BbKbd>Space</BbKbd>
            </KeyboardShortcutItem>
            <KeyboardShortcutItem Description="Move focus between pagination controls">
                <BbKbd>Tab</BbKbd>
            </KeyboardShortcutItem>
        </KeyboardNavigation>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>
        <div class="space-y-4">
            <ApiReference ComponentName="Pagination">
                <ApiParameter Name="State" Type="PaginationState?" Default="null">
                    Optional pagination state for automatic state management. When provided, child components automatically wire up to this state.
                </ApiParameter>
                <ApiParameter Name="TotalPages" Type="int?" Default="null">
                    Shorthand total number of pages. When set and ChildContent is null, auto-renders the standard prev/pages/next layout.
                </ApiParameter>
                <ApiParameter Name="CurrentPage" Type="int" Default="1">
                    Current page number (1-based). Used with TotalPages for simple mode. Supports two-way binding.
                </ApiParameter>
                <ApiParameter Name="PageSizes" Type="int[]" Default="10, 20, 50, 100">
                    Available page size options for the page size selector.
                </ApiParameter>
                <ApiParameter Name="OnPageChanged" Type="EventCallback<int>">
                    Callback invoked when the current page changes.
                </ApiParameter>
                <ApiParameter Name="OnPageSizeChanged" Type="EventCallback<int>">
                    Callback invoked when the page size changes.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes for the root nav element.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    Custom child content. When null and TotalPages is set, renders the default layout automatically.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationContent">
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes for the list container.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    The pagination items to render inside the list.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationItem">
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes for the list item wrapper.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    The pagination control to render inside the item.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationLink">
                <ApiParameter Name="IsActive" Type="bool" Default="false">
                    Whether this link represents the current active page. Sets aria-current="page" when true.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the link is disabled.
                </ApiParameter>
                <ApiParameter Name="Href" Type="string?" Default="null">
                    Optional URL. When set, renders as an anchor element instead of a button.
                </ApiParameter>
                <ApiParameter Name="Size" Type="PaginationLinkSize" Default="Icon">
                    Size variant. Options: Default, Icon.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Click handler for the link.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    Content to render inside the link (typically a page number).
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationEllipsis">
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes for the ellipsis indicator.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationFirst">
                <ApiParameter Name="Disabled" Type="bool?" Default="null">
                    Explicitly disable the button. When null, automatically determined from pagination state.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Custom click handler. When using pagination state, navigation is automatic.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationPrevious">
                <ApiParameter Name="ShowText" Type="bool" Default="true">
                    Whether to show the text label alongside the icon.
                </ApiParameter>
                <ApiParameter Name="Text" Type="string" Default="Previous">
                    Custom text for the button label.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool?" Default="null">
                    Explicitly disable the button. When null, automatically determined from pagination state.
                </ApiParameter>
                <ApiParameter Name="Size" Type="PaginationLinkSize" Default="Default">
                    Size of the pagination link.
                </ApiParameter>
                <ApiParameter Name="Href" Type="string?" Default="null">
                    Optional URL. When set, renders as an anchor element.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Custom click handler. When using pagination state, navigation is automatic.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationNext">
                <ApiParameter Name="ShowText" Type="bool" Default="true">
                    Whether to show the text label alongside the icon.
                </ApiParameter>
                <ApiParameter Name="Text" Type="string" Default="Next">
                    Custom text for the button label.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool?" Default="null">
                    Explicitly disable the button. When null, automatically determined from pagination state.
                </ApiParameter>
                <ApiParameter Name="Size" Type="PaginationLinkSize" Default="Default">
                    Size of the pagination link.
                </ApiParameter>
                <ApiParameter Name="Href" Type="string?" Default="null">
                    Optional URL. When set, renders as an anchor element.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Custom click handler. When using pagination state, navigation is automatic.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationLast">
                <ApiParameter Name="Disabled" Type="bool?" Default="null">
                    Explicitly disable the button. When null, automatically determined from pagination state.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Custom click handler. When using pagination state, navigation is automatic.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationInfo">
                <ApiParameter Name="Format" Type="string" Default="Showing {0}-{1} of {2}">
                    Format string for displaying item range. Use {0} for start, {1} for end, {2} for total.
                </ApiParameter>
                <ApiParameter Name="EmptyText" Type="string" Default="No items">
                    Text to display when there are no items.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    Custom content to display when not using pagination state.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationPageDisplay">
                <ApiParameter Name="Format" Type="string" Default="Page {0} of {1}">
                    Format string for displaying page info. Use {0} for current page, {1} for total pages.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    Custom content to display when not using pagination state.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="PaginationPageSizeSelector">
                <ApiParameter Name="ShowLabel" Type="bool" Default="true">
                    Whether to show the label text.
                </ApiParameter>
                <ApiParameter Name="Label" Type="string" Default="Rows per page">
                    Label text for the page size selector.
                </ApiParameter>
                <ApiParameter Name="PageSizes" Type="int[]?" Default="null">
                    Override page sizes from context. When null, uses the parent Pagination's PageSizes.
                </ApiParameter>
                <ApiParameter Name="TriggerClass" Type="string?" Default="null">
                    CSS class for the Select trigger element.
                </ApiParameter>
                <ApiParameter Name="OnPageSizeChanged" Type="EventCallback<int>">
                    Custom callback when page size changes.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes.
                </ApiParameter>
            </ApiReference>
        </div>
    </section>
</div>

@code {
    private int _currentPage = 1;
    private int _simplePage = 1;

    private void HandleSimplePageChanged(int page)
    {
        _simplePage = page;
        StateHasChanged();
    }

    // State-managed pagination
    private PaginationState _paginationState = new()
    {
        CurrentPage = 1,
        PageSize = 10,
        TotalItems = 100
    };

    // Table-style pagination
    private PaginationState _tablePaginationState = new()
    {
        CurrentPage = 1,
        PageSize = 10,
        TotalItems = 253
    };

    // Custom labels pagination
    private PaginationState _customPaginationState = new()
    {
        CurrentPage = 1,
        PageSize = 20,
        TotalItems = 500
    };

    private void GoToPage(int page)
    {
        if (page >= 1 && page <= 5)
        {
            _currentPage = page;
        }
    }

    private void HandlePageChanged(int page)
    {
        // State is already updated automatically
        StateHasChanged();
    }

    private void HandleTablePageChanged(int page)
    {
        StateHasChanged();
    }

    private void HandleTablePageSizeChanged(int pageSize)
    {
        StateHasChanged();
    }
}
