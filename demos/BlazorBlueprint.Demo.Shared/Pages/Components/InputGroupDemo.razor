@page "/components/input-group"
@using BlazorBlueprint.Primitives.Services
@using System.ComponentModel.DataAnnotations

<PageTitle>Input Group - Blazor Blueprint</PageTitle>

<div class="space-y-10 max-w-sm">
    <div class="space-y-3">
        <h1 class="text-4xl font-bold tracking-tight">Input Group</h1>
        <p class="text-xl text-muted-foreground">
            Enhance inputs with icons, text, and action buttons.
        </p>
    </div>

    <!-- Basic Examples -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic Examples</h2>
            <p class="text-muted-foreground">
                Add icons and text to inputs for better context.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Icon Start -->
            <div class="space-y-2">
                <BbLabel>Search</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="search" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Placeholder="Search..." />
                </BbInputGroup>
            </div>

            <!-- Icon End -->
            <div class="space-y-2">
                <BbLabel>Username</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Value="johndoe123" Placeholder="Enter username" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd" Class="text-sm text-muted-foreground">
                        @@company.com
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Icons on Both Sides -->
            <div class="space-y-2">
                <BbLabel>Email</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="at-sign" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Email" Placeholder="name@example.com" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <LucideIcon Name="circle-check" Size="16" />
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Icons on Both Sides and Rounded -->
            <div class="space-y-2">
                <BbLabel>Website</BbLabel>
                <BbInputGroup Class="rounded-full">
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="circle-alert" Size="16" />
                        <span class="font-semibold text-sm">https://</span>
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Text" Placeholder="www.example.com" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <LucideIcon Name="star" Size="16" />
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/basic.txt" />
    </section>

    <!-- Text Addons -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Text Addons</h2>
            <p class="text-muted-foreground">
                Add text prefixes, suffixes, and labels to inputs.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Currency -->
            <div class="space-y-2">
                <BbLabel>Price</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <BbInputGroupText>$</BbInputGroupText>
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Number" Placeholder="0.00" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupText>USD</BbInputGroupText>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- URL -->
            <div class="space-y-2">
                <BbLabel>Website</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <BbInputGroupText>https://</BbInputGroupText>
                    </BbInputGroupAddon>
                    <BbInputGroupInput Placeholder="example.com" />
                </BbInputGroup>
            </div>

            <!-- Weight -->
            <div class="space-y-2">
                <BbLabel>Weight</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Type="InputType.Number" Placeholder="0" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupText>kg</BbInputGroupText>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/text-addons.txt" />
    </section>

    <!-- Action Buttons -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Action Buttons</h2>
            <p class="text-muted-foreground">
                Integrate action buttons directly into inputs.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Search with Button -->
            <div class="space-y-2">
                <BbLabel>Search</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Placeholder="Search products..." />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Class="!px-2.5 !py-0.5 !rounded-sm">
                            Search
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Icon Button -->
            <div class="space-y-2">
                <BbLabel>API Key</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Value="sk-1234567890abcdef" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-1.5 !py-1.5 !rounded-md">
                            <LucideIcon Name="copy" Size="16" />
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Icon + Button -->
            <div class="space-y-2">
                <BbLabel>Newsletter</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="mail" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Email" Placeholder="Enter your email" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Class="!px-2.5 !py-0.5 !rounded-sm">
                            Subscribe
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/action-buttons.txt" />
    </section>

    <!-- Form Validation -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Form Validation</h2>
            <p class="text-muted-foreground">
                Show validation states with icons and colors.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Success State -->
            <div class="space-y-2">
                <BbLabel>Username</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Value="johndoe" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <LucideIcon Name="circle-check" Size="16" Color="Green" />
                    </BbInputGroupAddon>
                </BbInputGroup>
                <p class="text-sm text-green-600">Username is available</p>
            </div>

            <!-- Error State -->
            <div class="space-y-2">
                <BbLabel>Email</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput
                        Type="InputType.Email"
                        Value="invalid-email"
                        AriaInvalid="true" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <LucideIcon Name="triangle-alert" Size="16" Class="text-destructive" />
                    </BbInputGroupAddon>
                </BbInputGroup>
                <p class="text-sm text-destructive">Please enter a valid email address</p>
            </div>

            <!-- Loading State -->
            <div class="space-y-2">
                <BbLabel>Verification Code</BbLabel>
                <BbInputGroup>
                    <BbInputGroupInput Placeholder="Enter code..." />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <LucideIcon Name="loader-circle" Size="16" Class="animate-spin" />
                    </BbInputGroupAddon>
                </BbInputGroup>
                <p class="text-sm text-muted-foreground">Verifying...</p>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/form-validation.txt" />
    </section>

    <!-- Advanced Examples -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Advanced Examples</h2>
            <p class="text-muted-foreground">
                Combine multiple features for complex use cases.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Search with Clear and Search Button -->
            <div class="space-y-2">
                <BbLabel>Advanced Search</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="search" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Placeholder="Search files and folders..." />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-1.5 !py-1.5 !rounded-md">
                            <LucideIcon Name="x" Size="16" />
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Class="!px-2.5 !py-0.5 !rounded-sm">
                            Search
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Amount with Currency Button -->
            <div class="space-y-2">
                <BbLabel>Transfer Amount</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="circle-dollar-sign" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Number" Placeholder="0.00" />
                    <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                        <BbInputGroupButton Variant="ButtonVariant.Outline" Class="!px-2.5 !py-0.5 !rounded-sm">
                            USD <LucideIcon Name="chevron-down" Size="14" />
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>

            <!-- Textarea with Action Buttons -->
            <div class="space-y-2">
                <BbLabel>Comment</BbLabel>
                <BbInputGroup>
                    <BbInputGroupTextarea Rows="4" Placeholder="Write your comment..." />
                    <BbInputGroupAddon Align="InputGroupAlign.BlockEnd">
                        <div class="flex items-center justify-between w-full">
                            <p class="text-sm text-muted-foreground">Max 500 characters</p>
                            <div class="flex gap-2">
                                <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-2.5 !py-0.5 !rounded-sm">
                                    Cancel
                                </BbInputGroupButton>
                                <BbInputGroupButton Class="!px-2.5 !py-0.5 !rounded-sm">
                                    Post
                                </BbInputGroupButton>
                            </div>
                        </div>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/advanced.txt" />
    </section>

    <!-- Dropdown Menu Example -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Dropdown Menu</h2>
            <p class="text-muted-foreground">
                Integrate dropdown menus with input fields for context actions.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Input with Dropdown Menu -->
            <div class="space-y-2">
                <BbLabel>File Name</BbLabel>
                <BbDropdownMenu>
                    <BbInputGroup>
                        <BbInputGroupInput Placeholder="Enter file name" />
                        <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                            <BbDropdownMenuTrigger>
                                <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-1.5 !py-1.5 !rounded-md">
                                    <LucideIcon Name="chevron-down" Size="16" />
                                </BbInputGroupButton>
                            </BbDropdownMenuTrigger>
                        </BbInputGroupAddon>
                    </BbInputGroup>
                    <BbDropdownMenuContent Align="@PopoverAlign.End">
                        <BbDropdownMenuItem OnClick="@(() => HandleMenuAction("Settings"))">Settings</BbDropdownMenuItem>
                        <BbDropdownMenuItem OnClick="@(() => HandleMenuAction("Copy path"))">Copy path</BbDropdownMenuItem>
                        <BbDropdownMenuItem OnClick="@(() => HandleMenuAction("Open location"))">Open location</BbDropdownMenuItem>
                    </BbDropdownMenuContent>
                </BbDropdownMenu>
            </div>

            <!-- Input with Search Scope Dropdown -->
            <div class="space-y-2">
                <BbLabel>Search</BbLabel>
                <BbDropdownMenu>
                    <BbInputGroup Class="rounded-lg">
                        <BbInputGroupInput Placeholder="Enter search query" />
                        <BbInputGroupAddon Align="InputGroupAlign.InlineEnd">
                            <BbDropdownMenuTrigger>
                                <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-1 !py-1 !rounded-md">
                                    Search In...
                                    <LucideIcon Name="chevron-down" Size="16" />
                                </BbInputGroupButton>
                            </BbDropdownMenuTrigger>
                        </BbInputGroupAddon>
                    </BbInputGroup>
                    <BbDropdownMenuContent Align="@PopoverAlign.End">
                        <BbDropdownMenuItem OnClick="@(() => HandleSearchScope("Documentation"))">Documentation</BbDropdownMenuItem>
                        <BbDropdownMenuItem OnClick="@(() => HandleSearchScope("Blog Posts"))">Blog Posts</BbDropdownMenuItem>
                        <BbDropdownMenuItem OnClick="@(() => HandleSearchScope("Changelog"))">Changelog</BbDropdownMenuItem>
                    </BbDropdownMenuContent>
                </BbDropdownMenu>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/dropdown-menu.txt" />
    </section>

    <!-- Code Editor Example -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Code Editor</h2>
            <p class="text-muted-foreground">
                Create code editor interfaces with header and footer toolbars.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Code Editor with Toolbar -->
            <div class="space-y-2">
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.BlockStart" Class="order-1 border-b !py-3">
                        <BbInputGroupText Class="font-mono font-medium gap-1.5">
                            <LucideIcon Name="file-code" Size="16" />
                            script.js
                        </BbInputGroupText>
                        <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="ml-auto !px-2 !py-2 !rounded-md">
                            <LucideIcon Name="refresh-cw" Size="16" />
                        </BbInputGroupButton>
                        <BbInputGroupButton Variant="ButtonVariant.Ghost" Class="!px-2 !py-2 !rounded-md">
                            <LucideIcon Name="copy" Size="16" />
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                    <BbInputGroupTextarea
                        Placeholder="console.log('Hello, world!');"
                        Rows="8"
                        Class="min-h-[200px] font-mono text-sm order-2 !border-0" />
                    <BbInputGroupAddon Align="InputGroupAlign.BlockEnd" Class="order-3 border-t !py-3">
                        <BbInputGroupText>Line 1, Column 1</BbInputGroupText>
                        <BbInputGroupButton Class="ml-auto !px-3 !py-1.5 !rounded-md">
                            Run <LucideIcon Name="corner-down-left" Size="16" />
                        </BbInputGroupButton>
                    </BbInputGroupAddon>
                </BbInputGroup>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/code-editor.txt" />
    </section>

    <!-- Update Timing -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Update Timing</h2>
            <p class="text-muted-foreground">
                Control when <code class="text-xs bg-muted px-1 py-0.5 rounded">ValueChanged</code> fires using the
                <code class="text-xs bg-muted px-1 py-0.5 rounded">UpdateTiming</code> parameter on InputGroupInput and InputGroupTextarea.
            </p>
        </div>

        <div class="space-y-6">
            <!-- Immediate -->
            <div class="space-y-2">
                <BbLabel>Immediate (default)</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="search" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput UpdateTiming="UpdateTiming.Immediate"
                                     Value="@_igImmediateValue"
                                     ValueChanged="@((v) => _igImmediateValue = v)"
                                     Placeholder="Fires on every keystroke" />
                </BbInputGroup>
                <div class="rounded-lg border p-3 bg-muted/50">
                    <p class="text-xs text-muted-foreground mb-1">Value:</p>
                    <p class="text-sm font-mono">@(string.IsNullOrEmpty(_igImmediateValue) ? "(empty)" : _igImmediateValue)</p>
                </div>
            </div>

            <!-- OnChange -->
            <div class="space-y-2">
                <BbLabel>OnChange (blur / Enter)</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="search" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput UpdateTiming="UpdateTiming.OnChange"
                                     Value="@_igOnChangeValue"
                                     ValueChanged="@((v) => _igOnChangeValue = v)"
                                     Placeholder="Fires on blur or Enter" />
                </BbInputGroup>
                <div class="rounded-lg border p-3 bg-muted/50">
                    <p class="text-xs text-muted-foreground mb-1">Value:</p>
                    <p class="text-sm font-mono">@(string.IsNullOrEmpty(_igOnChangeValue) ? "(empty)" : _igOnChangeValue)</p>
                </div>
            </div>

            <!-- Debounced -->
            <div class="space-y-2">
                <BbLabel>Debounced (500ms)</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="search" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput UpdateTiming="UpdateTiming.Debounced"
                                     DebounceInterval="500"
                                     Value="@_igDebouncedValue"
                                     ValueChanged="@((v) => _igDebouncedValue = v)"
                                     Placeholder="Fires after typing pauses" />
                </BbInputGroup>
                <div class="rounded-lg border p-3 bg-muted/50">
                    <p class="text-xs text-muted-foreground mb-1">Value:</p>
                    <p class="text-sm font-mono">@(string.IsNullOrEmpty(_igDebouncedValue) ? "(empty)" : _igDebouncedValue)</p>
                </div>
            </div>

            <!-- Textarea Debounced -->
            <div class="space-y-2">
                <BbLabel>Textarea Debounced (300ms)</BbLabel>
                <BbInputGroup>
                    <BbInputGroupTextarea UpdateTiming="UpdateTiming.Debounced"
                                        DebounceInterval="300"
                                        Rows="3"
                                        Value="@_igTextareaDebouncedValue"
                                        ValueChanged="@((v) => _igTextareaDebouncedValue = v)"
                                        Placeholder="Type to see debounced updates..." />
                    <BbInputGroupAddon Align="InputGroupAlign.BlockEnd">
                        <BbInputGroupText>Debounced at 300ms</BbInputGroupText>
                    </BbInputGroupAddon>
                </BbInputGroup>
                <div class="rounded-lg border p-3 bg-muted/50">
                    <p class="text-xs text-muted-foreground mb-1">Value:</p>
                    <p class="text-sm font-mono">@(string.IsNullOrEmpty(_igTextareaDebouncedValue) ? "(empty)" : _igTextareaDebouncedValue)</p>
                </div>
            </div>
        </div>
        <CodeBlock Source="Components/InputGroup/update-timing.txt" />
    </section>

    <!-- Form Validation with EditForm -->
    <section class="space-y-6">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">EditForm Validation</h2>
            <p class="text-muted-foreground">
                InputGroupInput and InputGroupTextarea integrate with Blazor's EditForm for model validation.
                Validation errors automatically apply error styling via <code class="text-xs bg-muted px-1 py-0.5 rounded">aria-invalid</code>.
            </p>
        </div>

        <EditForm Model="formModel" OnValidSubmit="HandleValidSubmit" class="space-y-4">
            <DataAnnotationsValidator />

            <div class="space-y-2">
                <BbLabel>Email</BbLabel>
                <BbInputGroup>
                    <BbInputGroupAddon Align="InputGroupAlign.InlineStart">
                        <LucideIcon Name="at-sign" Size="16" />
                    </BbInputGroupAddon>
                    <BbInputGroupInput Type="InputType.Email" @bind-Value="formModel.Email" Placeholder="name@example.com" />
                </BbInputGroup>
                <ValidationMessage For="@(() => formModel.Email)" class="text-sm text-destructive" />
            </div>

            <div class="space-y-2">
                <BbLabel>Comment</BbLabel>
                <BbInputGroup>
                    <BbInputGroupTextarea @bind-Value="formModel.Comment" Rows="3" Placeholder="Write your comment..." />
                </BbInputGroup>
                <ValidationMessage For="@(() => formModel.Comment)" class="text-sm text-destructive" />
            </div>

            <div class="flex gap-4">
                <BbButton Type="ButtonType.Submit" Variant="ButtonVariant.Default">Submit</BbButton>
                <BbButton Type="ButtonType.Button" Variant="ButtonVariant.Outline" OnClick="ResetForm">Reset</BbButton>
            </div>

            @if (!string.IsNullOrEmpty(formMessage))
            {
                <div class="p-4 bg-card rounded-lg border">
                    <p class="text-sm">@formMessage</p>
                </div>
            }
        </EditForm>
        <CodeBlock Source="Components/InputGroup/editform-validation.txt" />
    </section>

    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>InputGroupInput and InputGroupTextarea support aria-label for accessible labeling when no visible label is present</AccessibilityItem>
            <AccessibilityItem>aria-describedby links inputs to supplementary descriptions or instructions</AccessibilityItem>
            <AccessibilityItem>aria-invalid is set automatically when validation fails inside an EditForm, or manually via AriaInvalid parameter</AccessibilityItem>
            <AccessibilityItem>InputGroup applies destructive border styling when any child control has aria-invalid="true"</AccessibilityItem>
            <AccessibilityItem>InputGroupButton supports aria-label for icon-only buttons without visible text</AccessibilityItem>
            <AccessibilityItem>Clicking an InputGroupAddon delegates focus to the associated input control</AccessibilityItem>
        </AriaAttributes>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>
        <div class="space-y-4">
            <ApiReference ComponentName="InputGroup">
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the input group container.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?">
                    The child content containing InputGroupInput/InputGroupTextarea and InputGroupAddon components.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="InputGroupAddon">
                <ApiParameter Name="Align" Type="InputGroupAlign" Default="InlineStart">
                    The alignment position of the addon: InlineStart, InlineEnd, BlockStart, or BlockEnd.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the addon container.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?">
                    The addon content (icons, buttons, text, or other elements).
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="InputGroupInput">
                <ApiParameter Name="Type" Type="InputType" Default="Text">
                    The type of input (Text, Email, Password, Number, Tel, Url, Search, Date, Time, File).
                </ApiParameter>
                <ApiParameter Name="Value" Type="string?" Default="null">
                    The current value of the input. Use @@bind-Value for two-way binding.
                </ApiParameter>
                <ApiParameter Name="ValueChanged" Type="EventCallback&lt;string?&gt;">
                    Callback invoked when the input value changes.
                </ApiParameter>
                <ApiParameter Name="ValueExpression" Type="Expression&lt;Func&lt;string?&gt;&gt;?" Default="null">
                    Expression that identifies the bound value for EditForm integration.
                </ApiParameter>
                <ApiParameter Name="Placeholder" Type="string?" Default="null">
                    Placeholder text displayed when the input is empty.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the input is disabled.
                </ApiParameter>
                <ApiParameter Name="Required" Type="bool" Default="false">
                    Whether the input is required (sets the HTML required attribute).
                </ApiParameter>
                <ApiParameter Name="UpdateTiming" Type="UpdateTiming" Default="Immediate">
                    When ValueChanged fires: Immediate, OnChange, or Debounced.
                </ApiParameter>
                <ApiParameter Name="DebounceInterval" Type="int" Default="500">
                    Debounce delay in milliseconds when UpdateTiming is Debounced.
                </ApiParameter>
                <ApiParameter Name="Id" Type="string?" Default="null">
                    The HTML id attribute.
                </ApiParameter>
                <ApiParameter Name="Name" Type="string?" Default="null">
                    The HTML name attribute. Auto-derived from ValueExpression inside EditForm if not set.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?" Default="null">
                    ARIA label for accessibility.
                </ApiParameter>
                <ApiParameter Name="AriaDescribedBy" Type="string?" Default="null">
                    ARIA described-by attribute linking to a description element.
                </ApiParameter>
                <ApiParameter Name="AriaInvalid" Type="bool?" Default="null">
                    Whether the input value is invalid. Auto-detected inside EditForm.
                </ApiParameter>
                <ApiParameter Name="OnInputRef" Type="Action&lt;ElementReference&gt;?" Default="null">
                    Callback invoked after first render with the input's ElementReference for JS interop.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the input element.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="InputGroupTextarea">
                <ApiParameter Name="Value" Type="string?" Default="null">
                    The current value of the textarea. Use @@bind-Value for two-way binding.
                </ApiParameter>
                <ApiParameter Name="ValueChanged" Type="EventCallback&lt;string?&gt;">
                    Callback invoked when the textarea value changes.
                </ApiParameter>
                <ApiParameter Name="ValueExpression" Type="Expression&lt;Func&lt;string?&gt;&gt;?" Default="null">
                    Expression that identifies the bound value for EditForm integration.
                </ApiParameter>
                <ApiParameter Name="Rows" Type="int" Default="3">
                    The number of visible text rows.
                </ApiParameter>
                <ApiParameter Name="Placeholder" Type="string?" Default="null">
                    Placeholder text displayed when the textarea is empty.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the textarea is disabled.
                </ApiParameter>
                <ApiParameter Name="Required" Type="bool" Default="false">
                    Whether the textarea is required (sets the HTML required attribute).
                </ApiParameter>
                <ApiParameter Name="UpdateTiming" Type="UpdateTiming" Default="Immediate">
                    When ValueChanged fires: Immediate, OnChange, or Debounced.
                </ApiParameter>
                <ApiParameter Name="DebounceInterval" Type="int" Default="500">
                    Debounce delay in milliseconds when UpdateTiming is Debounced.
                </ApiParameter>
                <ApiParameter Name="Id" Type="string?" Default="null">
                    The HTML id attribute.
                </ApiParameter>
                <ApiParameter Name="Name" Type="string?" Default="null">
                    The HTML name attribute. Auto-derived from ValueExpression inside EditForm if not set.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?" Default="null">
                    ARIA label for accessibility.
                </ApiParameter>
                <ApiParameter Name="AriaDescribedBy" Type="string?" Default="null">
                    ARIA described-by attribute linking to a description element.
                </ApiParameter>
                <ApiParameter Name="AriaInvalid" Type="bool?" Default="null">
                    Whether the textarea value is invalid. Auto-detected inside EditForm.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the textarea element.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="InputGroupButton">
                <ApiParameter Name="Type" Type="ButtonType" Default="Button">
                    The button type (Button, Submit, Reset).
                </ApiParameter>
                <ApiParameter Name="Variant" Type="ButtonVariant" Default="Default">
                    The button visual variant.
                </ApiParameter>
                <ApiParameter Name="Size" Type="ButtonSize" Default="Small">
                    The button size. Defaults to Small for better proportions within input groups.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the button is disabled.
                </ApiParameter>
                <ApiParameter Name="OnClick" Type="EventCallback">
                    Click event handler.
                </ApiParameter>
                <ApiParameter Name="Icon" Type="RenderFragment?">
                    Icon to display in the button.
                </ApiParameter>
                <ApiParameter Name="IconPosition" Type="IconPosition" Default="Start">
                    Position of the icon relative to button text.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?" Default="null">
                    ARIA label for accessibility, especially for icon-only buttons.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the button.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?">
                    The button text content.
                </ApiParameter>
            </ApiReference>

            <ApiReference ComponentName="InputGroupText">
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the text container.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?">
                    The text content (currency symbols, URL prefixes, units, etc.).
                </ApiParameter>
            </ApiReference>
        </div>
    </section>
</div>

@code {
    private string? _igImmediateValue;
    private string? _igOnChangeValue;
    private string? _igDebouncedValue;
    private string? _igTextareaDebouncedValue;
    private InputGroupFormModel formModel = new();
    private string? formMessage;

    private void HandleValidSubmit()
    {
        formMessage = $"Form submitted! Email: {formModel.Email}, Comment: {formModel.Comment}";
    }

    private void ResetForm()
    {
        formModel = new();
        formMessage = null;
    }

    private void HandleMenuAction(string action)
    {
        // Handle menu action
        // The dropdown menu closes automatically after clicking an item
        Console.WriteLine($"Menu action: {action}");
    }

    private void HandleSearchScope(string scope)
    {
        // Handle search scope selection
        Console.WriteLine($"Search scope: {scope}");
    }

    private class InputGroupFormModel
    {
        [Required(ErrorMessage = "Email is required.")]
        [EmailAddress(ErrorMessage = "Please enter a valid email address.")]
        public string? Email { get; set; }

        [Required(ErrorMessage = "Comment is required.")]
        [StringLength(500, MinimumLength = 5, ErrorMessage = "Comment must be between 5 and 500 characters.")]
        public string? Comment { get; set; }
    }
}
