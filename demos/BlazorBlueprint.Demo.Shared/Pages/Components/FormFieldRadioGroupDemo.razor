@page "/components/form-field-radio-group"
@using System.ComponentModel.DataAnnotations

<PageTitle>FormFieldRadioGroup Component - Blazor Blueprint</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div>
        <div class="space-y-3">
            <h1 class="text-4xl font-bold tracking-tight">FormFieldRadioGroup</h1>
            <p class="text-xl text-muted-foreground">
                A form field wrapper for RadioGroup with built-in label, helper text, and error messages.
            </p>
        </div>
    </div>

    <!-- Which form component? -->
    <div class="rounded-lg border border-dashed bg-muted/30 p-6 space-y-3">
        <h2 class="text-lg font-semibold">Which form component?</h2>
        <div class="space-y-2 text-sm text-muted-foreground">
            <p><strong>Text input</strong> (string, int, date, etc.)? &rarr; <a href="/components/form-field-input" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldInput&lt;T&gt;</a></p>
            <p><strong>Checkbox</strong>? &rarr; <a href="/components/form-field-checkbox" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldCheckbox</a></p>
            <p><strong>Switch</strong>? &rarr; <a href="/components/form-field-switch" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldSwitch</a></p>
            <p><strong>Radio group</strong>? &rarr; <strong>FormFieldRadioGroup</strong> (this page)</p>
            <p><strong>Select dropdown</strong>? &rarr; <a href="/components/form-field-select" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldSelect</a></p>
            <p><strong>Searchable select</strong>? &rarr; <a href="/components/form-field-combobox" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldCombobox</a></p>
            <p><strong>Multi-select</strong>? &rarr; <a href="/components/form-field-multi-select" class="text-primary underline underline-offset-4 hover:text-primary/80">FormFieldMultiSelect</a></p>
        </div>
    </div>

    <!-- Basic Example -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Basic Usage</h2>
            <p class="text-sm text-muted-foreground">
                A radio group with a label and helper text. Provide RadioGroupItem children as content.
            </p>
        </div>
        <div class="max-w-md">
            <BbFormFieldRadioGroup TValue="string"
                                 @bind-Value="_spacing"
                                 Label="Spacing"
                                 HelperText="Choose the density of your layout.">
                <BbRadioGroupItem Value="@("default")" Label="Default" />
                <BbRadioGroupItem Value="@("comfortable")" Label="Comfortable" />
                <BbRadioGroupItem Value="@("compact")" Label="Compact" />
            </BbFormFieldRadioGroup>
        </div>
        <div class="rounded-lg border p-4 bg-muted/50">
            <p class="text-sm font-medium mb-1">Selected:</p>
            <p class="text-sm font-mono">@(string.IsNullOrEmpty(_spacing) ? "(none)" : _spacing)</p>
        </div>
        <CodeBlock Source="Components/FormFieldRadioGroup/basic.txt" />
    </div>

    <!-- Disabled -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">Disabled</h2>
            <p class="text-sm text-muted-foreground">
                A disabled radio group form field.
            </p>
        </div>
        <div class="max-w-md">
            <BbFormFieldRadioGroup TValue="string"
                                 Value="@("medium")"
                                 Label="Font size"
                                 HelperText="Locked by your administrator."
                                 Disabled="true">
                <BbRadioGroupItem Value="@("small")" Label="Small" />
                <BbRadioGroupItem Value="@("medium")" Label="Medium" />
                <BbRadioGroupItem Value="@("large")" Label="Large" />
            </BbFormFieldRadioGroup>
        </div>
        <CodeBlock Source="Components/FormFieldRadioGroup/disabled.txt" />
    </div>

    <!-- EditForm Integration -->
    <div class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">EditForm Integration</h2>
            <p class="text-sm text-muted-foreground">
                Validation errors display automatically inside an EditForm. Try submitting without selecting an option.
            </p>
        </div>
        <div class="max-w-md">
            <EditForm Model="_formModel" OnValidSubmit="HandleFormSubmit">
                <DataAnnotationsValidator />
                <div class="space-y-4">
                    <BbFormFieldRadioGroup TValue="string"
                                         @bind-Value="_formModel.ContactMethod"
                                         Label="Preferred contact method">
                        <BbRadioGroupItem Value="@("email")" Label="Email" />
                        <BbRadioGroupItem Value="@("sms")" Label="SMS" />
                        <BbRadioGroupItem Value="@("phone")" Label="Phone" />
                    </BbFormFieldRadioGroup>
                    <BbButton Type="ButtonType.Submit">Submit</BbButton>
                </div>
            </EditForm>
            @if (_formSubmitted)
            {
                <div class="mt-4 rounded-lg border border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800 p-4">
                    <p class="text-sm font-medium text-green-800 dark:text-green-200">
                        Submitted: @_formModel.ContactMethod
                    </p>
                </div>
            }
        </div>
        <CodeBlock Source="Components/FormFieldRadioGroup/editform.txt" />
    </div>

    <AccessibilityList>
        <AriaAttributes>
            <AccessibilityItem>Automatically associates label with input via generated ID</AccessibilityItem>
            <AccessibilityItem>Description linked via aria-describedby</AccessibilityItem>
            <AccessibilityItem>Validation errors displayed with aria-invalid</AccessibilityItem>
        </AriaAttributes>
    </AccessibilityList>

    <!-- API Reference -->
    <section class="space-y-4">
        <div class="space-y-2">
            <h2 class="text-2xl font-semibold">API Reference</h2>
            <p class="text-muted-foreground">Component properties and parameters.</p>
        </div>
        <div class="space-y-4">
            <ApiReference ComponentName="FormFieldRadioGroup&lt;TValue&gt;">
                <ApiParameter Name="Label" Type="string?" Default="null">
                    The label text displayed above the radio group.
                </ApiParameter>
                <ApiParameter Name="HelperText" Type="string?" Default="null">
                    Helper text displayed below the radio group. Hidden during error state.
                </ApiParameter>
                <ApiParameter Name="ErrorText" Type="string?" Default="null">
                    Manual error text override. When the field is invalid and this is set, replaces auto-generated messages.
                </ApiParameter>
                <ApiParameter Name="Orientation" Type="FieldOrientation" Default="Vertical">
                    Layout orientation of the field.
                </ApiParameter>
                <ApiParameter Name="Value" Type="TValue" Default="default">
                    The currently selected value. Use @@bind-Value for two-way binding.
                </ApiParameter>
                <ApiParameter Name="ValueChanged" Type="EventCallback&lt;TValue&gt;">
                    Callback invoked when the selected value changes.
                </ApiParameter>
                <ApiParameter Name="Disabled" Type="bool" Default="false">
                    Whether the entire radio group is disabled.
                </ApiParameter>
                <ApiParameter Name="InputClass" Type="string?" Default="null">
                    Additional CSS classes applied to the inner RadioGroup element.
                </ApiParameter>
                <ApiParameter Name="Class" Type="string?" Default="null">
                    Additional CSS classes applied to the outer Field container.
                </ApiParameter>
                <ApiParameter Name="AriaLabel" Type="string?" Default="null">
                    ARIA label for the control.
                </ApiParameter>
                <ApiParameter Name="ChildContent" Type="RenderFragment?" Default="null">
                    Content containing RadioGroupItem components.
                </ApiParameter>
            </ApiReference>
        </div>
    </section>
</div>

@code {
    private string _spacing = "default";
    private bool _formSubmitted;
    private RadioGroupFormModel _formModel = new();

    private void HandleFormSubmit()
    {
        _formSubmitted = true;
    }

    private class RadioGroupFormModel
    {
        [Required(ErrorMessage = "Please select a contact method.")]
        public string ContactMethod { get; set; } = "";
    }
}
