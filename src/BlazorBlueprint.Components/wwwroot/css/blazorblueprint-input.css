/* BlazorBlueprint Components - Pre-built Tailwind CSS */
@import 'tailwindcss';

/* Configure source paths for scanning Razor files */
@source "../../Components";

/* Component structural variables & default theme tokens */
/* Alert defaults let users drop in a raw tweakcn/shadcn theme without defining
   the BB-specific --alert-* variables. Un-layered :root in the user's theme
   automatically overrides these @layer base values via CSS cascade. */
@layer base {
  :root {
    --sidebar-width: 16rem;
    --sidebar-width-mobile: 18rem;
    --sidebar-width-icon: 3rem;

    /* Default alert colors — override in your theme to customize */
    --alert-success: oklch(0.55 0.20 142);
    --alert-success-foreground: oklch(0.30 0.09 142);
    --alert-success-bg: oklch(0.993 0.003 142);
    --alert-info: oklch(0.50 0.20 255);
    --alert-info-foreground: oklch(0.30 0.10 255);
    --alert-info-bg: oklch(0.993 0.003 255);
    --alert-warning: oklch(0.68 0.18 55);
    --alert-warning-foreground: oklch(0.35 0.10 55);
    --alert-warning-bg: oklch(0.995 0.003 55);
    --alert-danger: var(--destructive, oklch(0.55 0.22 27));
    --alert-danger-foreground: var(--destructive-foreground, oklch(0.30 0.12 27));
    --alert-danger-bg: oklch(0.993 0.003 27);
  }

  .dark {
    --alert-success: oklch(0.60 0.18 142);
    --alert-success-foreground: oklch(0.90 0.06 142);
    --alert-success-bg: oklch(0.18 0.008 142);
    --alert-info: oklch(0.55 0.18 255);
    --alert-info-foreground: oklch(0.90 0.05 255);
    --alert-info-bg: oklch(0.18 0.008 255);
    --alert-warning: oklch(0.65 0.16 55);
    --alert-warning-foreground: oklch(0.92 0.06 55);
    --alert-warning-bg: oklch(0.19 0.008 55);
    --alert-danger: var(--destructive, oklch(0.55 0.20 27));
    --alert-danger-foreground: var(--destructive-foreground, oklch(0.90 0.06 27));
    --alert-danger-bg: oklch(0.18 0.008 27);
  }
}

/* Tailwind v4 CSS-first theme configuration.
   Uses @theme inline so var() references resolve at the utility call site. */
@theme inline {
  /* Colors */
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-alert-success: var(--alert-success);
  --color-alert-success-foreground: var(--alert-success-foreground);
  --color-alert-success-bg: var(--alert-success-bg);
  --color-alert-info: var(--alert-info);
  --color-alert-info-foreground: var(--alert-info-foreground);
  --color-alert-info-bg: var(--alert-info-bg);
  --color-alert-warning: var(--alert-warning);
  --color-alert-warning-foreground: var(--alert-warning-foreground);
  --color-alert-warning-bg: var(--alert-warning-bg);
  --color-alert-danger: var(--alert-danger);
  --color-alert-danger-foreground: var(--alert-danger-foreground);
  --color-alert-danger-bg: var(--alert-danger-bg);

  /* Fonts */
  --font-sans: var(--font-sans, ui-sans-serif, system-ui, sans-serif);
  --font-serif: var(--font-serif, ui-serif, Georgia, serif);
  --font-mono: var(--font-mono, ui-monospace, monospace);

  /* Border Radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Tracking (letter-spacing) — relative to --tracking-normal from the user's theme */
  --tracking-tighter: calc(var(--tracking-normal) - 0.05em);
  --tracking-tight: calc(var(--tracking-normal) - 0.025em);
  --tracking-normal: var(--tracking-normal);
  --tracking-wide: calc(var(--tracking-normal) + 0.025em);
  --tracking-wider: calc(var(--tracking-normal) + 0.05em);
  --tracking-widest: calc(var(--tracking-normal) + 0.1em);
}

/* Required for keyboard navigation visual feedback in Select/Combobox/DropdownMenu */
@layer components {
  [role="option"][data-focused="true"] {
    background-color: var(--accent);
    color: var(--accent-foreground);
  }
}

/* Navigation Menu keyboard navigation focus styling */
@layer components {
  /* Remove browser default focus outline from the menu container */
  [role="menu"]:focus,
  [role="menu"]:focus-visible {
    outline: none;
  }

  /* Style the parent container when a link inside is focused */
  [role="menu"] div:has(> a:focus),
  [role="menu"] div:has(> a:focus-visible) {
    outline: 2px solid var(--ring);
    outline-offset: -2px;
    border-radius: 0.5rem;
    background-color: var(--accent);
  }

  /* Remove default focus outline from the link itself */
  [role="menu"] a:focus,
  [role="menu"] a:focus-visible {
    outline: none;
  }
}


/* Global theme overrides - utilities layer ensures these override Tailwind's reset */
@layer utilities {
  * {
    border-color: var(--border);
  }

  body {
    background-color: var(--background);
    color: var(--foreground);
    font-family: var(--font-sans);
    letter-spacing: var(--tracking-normal, 0);
  }

  /* Grid animation utilities for Accordion/Collapsible */
  .grid-rows-\[0fr\] {
    grid-template-rows: 0fr;
  }

  .grid-rows-\[1fr\] {
    grid-template-rows: 1fr;
  }

  .data-\[state\=open\]\:grid-rows-\[1fr\][data-state="open"] {
    grid-template-rows: 1fr;
  }

  .transition-\[grid-template-rows\] {
    transition-property: grid-template-rows;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
}

/* AspectRatio component - content wrapper fills parent and children fill wrapper */
/* Using utilities layer for higher specificity */
@layer utilities {
  .aspect-ratio-content {
    position: absolute !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
  }

  .aspect-ratio-content > * {
    width: 100% !important;
    height: 100% !important;
  }
}

/* Rich Text Editor - Headless Quill.js styles */
@layer components {
  /* Container styling - headless mode has no .ql-snow class */
  [data-slot="rich-text-editor"] .ql-container {
    font-family: inherit;
    font-size: inherit;
  }

  /* Editor content area */
  [data-slot="rich-text-editor"] .ql-editor {
    min-height: inherit;
    padding: 0.75rem;
    color: var(--foreground);
    outline: none;
  }

  /* Placeholder styling */
  [data-slot="rich-text-editor"] .ql-editor.ql-blank::before {
    color: var(--muted-foreground) !important;
    font-style: normal;
    left: 0.75rem;
    right: 0.75rem;
    pointer-events: none;
  }

  /* Disabled state */
  [data-slot="rich-text-editor"].opacity-50 .ql-editor {
    cursor: not-allowed;
  }

  /* Inline formatting - reinforce browser defaults */
  [data-slot="rich-text-editor"] .ql-editor strong,
  [data-slot="rich-text-editor"] .ql-editor b {
    font-weight: 700;
  }

  [data-slot="rich-text-editor"] .ql-editor em,
  [data-slot="rich-text-editor"] .ql-editor i {
    font-style: italic;
  }

  [data-slot="rich-text-editor"] .ql-editor u {
    text-decoration: underline;
  }

  [data-slot="rich-text-editor"] .ql-editor s {
    text-decoration: line-through;
  }

  /* Lists */
  [data-slot="rich-text-editor"] .ql-editor ul,
  [data-slot="rich-text-editor"] .ql-editor ol {
    padding-left: 1.5em;
    margin: 0.5em 0;
  }

  [data-slot="rich-text-editor"] .ql-editor ul {
    list-style-type: disc;
  }

  [data-slot="rich-text-editor"] .ql-editor ol {
    list-style-type: decimal;
  }

  [data-slot="rich-text-editor"] .ql-editor li {
    margin: 0.25em 0;
  }

  /* Code block - Quill uses .ql-code-block classes, not <pre> */
  [data-slot="rich-text-editor"] .ql-editor .ql-code-block-container {
    background-color: var(--muted);
    padding: 0.75em 1em;
    border-radius: 0.375rem;
    overflow-x: auto;
    font-family: var(--font-mono, ui-monospace, monospace);
    font-size: 0.875em;
    margin: 0.5em 0;
  }

  [data-slot="rich-text-editor"] .ql-editor .ql-code-block {
    font-family: inherit;
  }

  /* Links */
  [data-slot="rich-text-editor"] .ql-editor a {
    color: var(--primary);
    text-decoration: underline;
  }

  [data-slot="rich-text-editor"] .ql-editor a:hover {
    text-decoration: none;
  }

  /* Paragraphs */
  [data-slot="rich-text-editor"] .ql-editor p {
    margin: 0.5em 0;
  }

  [data-slot="rich-text-editor"] .ql-editor p:first-child {
    margin-top: 0;
  }

  [data-slot="rich-text-editor"] .ql-editor p:last-child {
    margin-bottom: 0;
  }
}

/* Timeline right-aligned content */
@layer components {
  [data-timeline-end] {
    text-align: right;
  }

  /* Flex-column containers (TimelineContent): align children to the right */
  [data-timeline-end] > :where(.flex-col) {
    align-items: flex-end;
    padding-left: 0;
    padding-right: 0.5rem;
  }

  /* Flex-row containers (TimelineHeader): justify items to the right */
  [data-timeline-end] :where(.flex:not(.flex-col)) {
    justify-content: flex-end;
  }
}

/* Rich Text Editor - Block formats that must override Tailwind preflight */
@layer utilities {
  /* Headings - !important required to override Tailwind preflight resets */
  [data-slot="rich-text-editor"] .ql-editor h1 {
    font-size: 2em !important;
    font-weight: 700 !important;
    line-height: 1.2 !important;
    margin-top: 0 !important;
    margin-bottom: 0.5em !important;
  }

  [data-slot="rich-text-editor"] .ql-editor h2 {
    font-size: 1.5em !important;
    font-weight: 600 !important;
    line-height: 1.3 !important;
    margin-top: 0 !important;
    margin-bottom: 0.5em !important;
  }

  [data-slot="rich-text-editor"] .ql-editor h3 {
    font-size: 1.25em !important;
    font-weight: 600 !important;
    line-height: 1.4 !important;
    margin-top: 0 !important;
    margin-bottom: 0.5em !important;
  }

  /* Blockquote - !important required to override Tailwind preflight resets */
  [data-slot="rich-text-editor"] .ql-editor blockquote {
    border-left: 4px solid var(--border) !important;
    padding-left: 1em !important;
    margin: 0.5em 0 !important;
    color: var(--muted-foreground) !important;
    font-style: italic !important;
  }
}

/* DateRangePicker responsive layout — desktop (≥640px)
   Doubled data-attribute selectors give specificity 0,2,0 which beats single-class Tailwind
   utilities (0,1,0) regardless of source order, keeping these rules inside the layer system. */
@layer utilities {
  @media (min-width: 40rem) {
    [data-drp][data-drp] {
      width: auto;
    }

    [data-drp-body][data-drp-body] {
      flex-direction: row;
    }

    [data-drp-presets][data-drp-presets] {
      flex-direction: column;
      overflow-x: visible;
      border-bottom-width: 0;
      border-right-style: var(--tw-border-style);
      border-right-width: 1px;
      min-width: 140px;
    }

    [data-drp-presets-label][data-drp-presets-label] {
      display: block;
    }

    [data-drp-calendar][data-drp-calendar] {
      padding: calc(var(--spacing) * 3);
    }

    [data-drp-mobile-nav][data-drp-mobile-nav] {
      display: none;
    }

    [data-drp-desktop-spacer][data-drp-desktop-spacer] {
      display: block;
    }

    [data-drp-calendar-2][data-drp-calendar-2] {
      display: block;
      padding: calc(var(--spacing) * 3);
    }

    [data-drp-cell][data-drp-cell] {
      flex: none;
    }

    [data-drp-preset-btn][data-drp-preset-btn] {
      flex-shrink: 1;
      white-space: normal;
    }

    [data-drp-day-btn][data-drp-day-btn] {
      width: calc(var(--spacing) * 9);
    }
  }
}

/* Animations (CSS-first replacement for Tailwind config/plugin) */
@theme inline {
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-collapsible-down: collapsible-down 0.2s ease-out;
  --animate-collapsible-up: collapsible-up 0.2s ease-out;
  --animate-dialog-zoom-in: dialog-zoom-in 0.2s ease-out;
  --animate-dialog-zoom-out: dialog-zoom-out 0.2s ease-out;
  --animate-overlay-fade-in: overlay-fade-in 0.2s ease-out;
  --animate-overlay-fade-out: overlay-fade-out 0.2s ease-out;
  --animate-content-slide-in-from-top: content-slide-in-from-top 0.2s ease-out;
  --animate-content-slide-out-to-top: content-slide-out-to-top 0.2s ease-out;
  --animate-content-slide-in-from-bottom: content-slide-in-from-bottom 0.2s ease-out;
  --animate-content-slide-out-to-bottom: content-slide-out-to-bottom 0.2s ease-out;
  --animate-content-slide-in-from-left: content-slide-in-from-left 0.2s ease-out;
  --animate-content-slide-out-to-left: content-slide-out-to-left 0.2s ease-out;
  --animate-content-slide-in-from-right: content-slide-in-from-right 0.2s ease-out;
  --animate-content-slide-out-to-right: content-slide-out-to-right 0.2s ease-out;
  --animate-slide-in-from-top: slide-in-from-top 0.2s ease-out;
  --animate-slide-in-from-bottom: slide-in-from-bottom 0.2s ease-out;
  --animate-slide-in-from-left: slide-in-from-left 0.2s ease-out;
  --animate-slide-in-from-right: slide-in-from-right 0.2s ease-out;
  --animate-slide-out-to-top: slide-out-to-top 0.2s ease-out;
  --animate-slide-out-to-bottom: slide-out-to-bottom 0.2s ease-out;
  --animate-slide-out-to-left: slide-out-to-left 0.2s ease-out;
  --animate-slide-out-to-right: slide-out-to-right 0.2s ease-out;
  --animate-toast-slide-in-from-top: toast-slide-in-from-top 0.35s ease-out;
  --animate-toast-slide-in-from-bottom: toast-slide-in-from-bottom 0.35s ease-out;
}

/* Tailwind v4 keyframes for component animations */
@keyframes accordion-down {
  from { height: 0; }
  to { height: var(--radix-accordion-content-height, auto); }
}

@keyframes accordion-up {
  from { height: var(--radix-accordion-content-height, auto); }
  to { height: 0; }
}

@keyframes collapsible-down {
  from { height: 0; }
  to { height: var(--radix-collapsible-content-height, auto); }
}

@keyframes collapsible-up {
  from { height: var(--radix-collapsible-content-height, auto); }
  to { height: 0; }
}

@keyframes dialog-zoom-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes dialog-zoom-out {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.95); }
}

@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes overlay-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes content-slide-in-from-top {
  from { opacity: 0; transform: translateY(-0.5rem); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes content-slide-out-to-top {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-0.5rem); }
}

@keyframes content-slide-in-from-bottom {
  from { opacity: 0; transform: translateY(0.5rem); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes content-slide-out-to-bottom {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(0.5rem); }
}

@keyframes content-slide-in-from-left {
  from { opacity: 0; transform: translateX(-0.5rem); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes content-slide-out-to-left {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(-0.5rem); }
}

@keyframes content-slide-in-from-right {
  from { opacity: 0; transform: translateX(0.5rem); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes content-slide-out-to-right {
  from { opacity: 1; transform: translateX(0); }
  to { opacity: 0; transform: translateX(0.5rem); }
}

@keyframes slide-in-from-top {
  from { transform: translateY(-100%); }
  to { transform: translateY(0); }
}

@keyframes slide-in-from-bottom {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes slide-in-from-left {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

@keyframes slide-in-from-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes slide-out-to-top {
  from { transform: translateY(0); }
  to { transform: translateY(-100%); }
}

@keyframes slide-out-to-bottom {
  from { transform: translateY(0); }
  to { transform: translateY(100%); }
}

@keyframes slide-out-to-left {
  from { transform: translateX(0); }
  to { transform: translateX(-100%); }
}

@keyframes slide-out-to-right {
  from { transform: translateX(0); }
  to { transform: translateX(100%); }
}

@keyframes toast-slide-in-from-top {
  from { opacity: 0; transform: translateY(-100%); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes toast-slide-in-from-bottom {
  from { opacity: 0; transform: translateY(100%); }
  to { opacity: 1; transform: translateY(0); }
}


/* ...existing code... */

@layer utilities {
  /* ...existing code... */

  /* Tailwindcss-animate compatibility utilities (v4 CSS-first) */
  .animate-in {
    animation-name: enter;
    animation-duration: var(--tw-duration, 0.2s);
    animation-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    animation-fill-mode: both;
  }

  .animate-out {
    animation-name: exit;
    animation-duration: var(--tw-duration, 0.2s);
    animation-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    animation-fill-mode: both;
  }

  .fade-in,
  .fade-in-0 {
    --tw-enter-opacity: 0;
  }

  .fade-out,
  .fade-out-0 {
    --tw-exit-opacity: 0;
  }

  .fade-out-80 {
    --tw-exit-opacity: 0.8;
  }

  .zoom-in-95 {
    --tw-enter-scale: 0.95;
  }

  .zoom-in-90 {
    --tw-enter-scale: 0.9;
  }

  .zoom-out-95 {
    --tw-exit-scale: 0.95;
  }

  .slide-in-from-top-2 {
    --tw-enter-translate-y: -0.5rem;
  }

  .slide-in-from-bottom-2 {
    --tw-enter-translate-y: 0.5rem;
  }

  .slide-in-from-left-2 {
    --tw-enter-translate-x: -0.5rem;
  }

  .slide-in-from-right-2 {
    --tw-enter-translate-x: 0.5rem;
  }

  .slide-in-from-left-1\/2 {
    --tw-enter-translate-x: -50%;
  }

  .slide-in-from-top-\[48\%\] {
    --tw-enter-translate-y: -48%;
  }

  .slide-in-from-top-full {
    --tw-enter-translate-y: -100%;
  }

  .slide-in-from-bottom-full,
  .slide-in-from-bottom_full {
    --tw-enter-translate-y: 100%;
  }

  .slide-out-to-right-full {
    --tw-exit-translate-x: 100%;
  }
}

@keyframes enter {
  from {
    opacity: var(--tw-enter-opacity, 1);
    transform: translate3d(
        var(--tw-enter-translate-x, 0),
        var(--tw-enter-translate-y, 0),
        0
      )
      scale(var(--tw-enter-scale, 1))
      rotate(var(--tw-enter-rotate, 0));
  }
}

@keyframes exit {
  to {
    opacity: var(--tw-exit-opacity, 1);
    transform: translate3d(
        var(--tw-exit-translate-x, 0),
        var(--tw-exit-translate-y, 0),
        0
      )
      scale(var(--tw-exit-scale, 1))
      rotate(var(--tw-exit-rotate, 0));
  }
}

