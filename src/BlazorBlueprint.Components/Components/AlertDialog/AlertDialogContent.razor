@namespace BlazorBlueprint.Components.AlertDialog
@using BlazorBlueprint.Components.Utilities
@using BlazorBlueprint.Primitives.Dialog

@*
    Alert Dialog Content - the modal content panel.
    Does not allow dismissal via click-outside or Escape for confirmations.
*@

<DialogPortal>
    <DialogOverlay class="fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0" />

    <BlazorBlueprint.Primitives.Dialog.DialogContent
        class="@GetClassNames()"
        CloseOnEscape="false"
        TrapFocus="true"
        LockScroll="true"
        role="alertdialog"
        @attributes="AdditionalAttributes">
        @ChildContent
    </BlazorBlueprint.Primitives.Dialog.DialogContent>
</DialogPortal>

@code {
    /// <summary>
    /// The content to render inside the alert dialog.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Additional CSS classes to apply to the dialog content.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Additional attributes to apply to the dialog content.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    /// <summary>
    /// Gets the computed CSS classes for the alert dialog content.
    /// </summary>
    private string GetClassNames() => ClassNames.cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%]",
        "gap-4 border bg-background p-6 shadow-lg duration-200",
        "data-[state=open]:animate-in data-[state=closed]:animate-out",
        "data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0",
        "data-[state=open]:slide-in-from-top-2 data-[state=closed]:slide-out-to-top-2",
        "sm:rounded-lg",
        Class
    );
}
