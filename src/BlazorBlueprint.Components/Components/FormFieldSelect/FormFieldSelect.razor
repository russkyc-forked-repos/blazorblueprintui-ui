@namespace BlazorBlueprint.Components.FormFieldSelect
@using BlazorBlueprint.Components.Select
@using BlazorBlueprint.Components.Field
@typeparam TValue
@inherits FormFieldBase
@attribute [CascadingTypeParameter(nameof(TValue))]

<Field Orientation="@Orientation" IsInvalid="@IsInvalid" Class="@Class">
    @if (Label is not null)
    {
        <FieldLabel For="@ControlId">@Label</FieldLabel>
    }
    <FieldContent>
        <Select TValue="TValue"
                Value="@Value"
                ValueChanged="HandleValueChanged"
                ValueExpression="@ValueExpression"
                Disabled="@Disabled"
                DisplayTextSelector="@DisplayTextSelector"
                Class="@InputClass">
            <SelectTrigger TValue="TValue" id="@ControlId" aria-describedby="@DescribedById">
                <SelectValue Placeholder="@Placeholder" />
            </SelectTrigger>
            <SelectContent TValue="TValue">
                @ChildContent
            </SelectContent>
        </Select>
        @if (!string.IsNullOrEmpty(HelperText) && !IsInvalid)
        {
            <FieldDescription Id="@DescriptionId">@HelperText</FieldDescription>
        }
        @if (IsInvalid && !string.IsNullOrEmpty(ErrorText))
        {
            <FieldError Id="@ErrorId">@ErrorText</FieldError>
        }
        else if (HasEditContextErrors)
        {
            <FieldError Id="@ErrorId" Errors="@EditContextErrors" />
        }
    </FieldContent>
</Field>
