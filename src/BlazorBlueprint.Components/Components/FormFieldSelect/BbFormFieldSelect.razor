@namespace BlazorBlueprint.Components
@typeparam TValue
@inherits FormFieldBase
@attribute [CascadingTypeParameter(nameof(TValue))]

<BbField Orientation="@Orientation" IsInvalid="@IsInvalid" Class="@Class">
    @if (Label is not null)
    {
        <BbFieldLabel For="@ControlId">@Label</BbFieldLabel>
    }
    <BbFieldContent>
        <BbSelect TValue="TValue"
                Value="@Value"
                ValueChanged="HandleValueChanged"
                ValueExpression="@ValueExpression"
                Disabled="@Disabled"
                DisplayTextSelector="@GetEffectiveDisplayTextSelector()"
                Class="@InputClass">
            <BbSelectTrigger TValue="TValue" id="@ControlId" aria-describedby="@DescribedById">
                <BbSelectValue Placeholder="@Placeholder" />
            </BbSelectTrigger>
            <BbSelectContent TValue="TValue">
                @if (Options is not null)
                {
                    @foreach (var option in Options)
                    {
                        <BbSelectItem TValue="TValue" Value="@option.Value" Text="@option.Text" />
                    }
                }
                else
                {
                    @ChildContent
                }
            </BbSelectContent>
        </BbSelect>
        @if (!string.IsNullOrEmpty(HelperText) && !IsInvalid)
        {
            <BbFieldDescription Id="@DescriptionId">@HelperText</BbFieldDescription>
        }
        @if (IsInvalid && !string.IsNullOrEmpty(ErrorText))
        {
            <BbFieldError Id="@ErrorId">@ErrorText</BbFieldError>
        }
        else if (HasEditContextErrors)
        {
            <BbFieldError Id="@ErrorId" Errors="@EditContextErrors" />
        }
    </BbFieldContent>
</BbField>
