@namespace BlazorBlueprint.Components
@using BlazorBlueprint.Icons.Lucide.Components

@*
    ResponsiveNavTrigger component for toggling the mobile navigation.
    Shows a hamburger menu icon by default, visible only on mobile.
*@

<button type="button" class="@GetClasses()" @onclick="HandleClick" @attributes="AdditionalAttributes">
    @if (ChildContent != null)
    {
        @ChildContent
    }
    else
    {
        <LucideIcon Name="menu" Size="20" />
        <span class="sr-only">Toggle Menu</span>
    }
</button>

@code {
    [CascadingParameter]
    private ResponsiveNavContext? Context { get; set; }

    /// <summary>
    /// Custom content for the trigger button.
    /// If not provided, defaults to a hamburger menu icon.
    /// </summary>
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    /// <summary>
    /// Click handler for custom behavior.
    /// </summary>
    [Parameter]
    public EventCallback<MouseEventArgs> OnClick { get; set; }

    /// <summary>
    /// Additional CSS classes.
    /// </summary>
    [Parameter]
    public string? Class { get; set; }

    /// <summary>
    /// Additional attributes.
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private async Task HandleClick(MouseEventArgs e)
    {
        if (Context != null)
        {
            Context.Toggle();
        }

        if (OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(e);
        }
    }

    private string GetClasses()
    {
        return ClassNames.cn(
            "inline-flex items-center justify-center rounded-md p-2 text-foreground hover:bg-accent hover:text-accent-foreground focus:outline-none focus-visible:ring-2 focus-visible:ring-ring md:hidden",
            Class
        );
    }
}
